var ReactFlow=(()=>{var dc=Object.create;var uo=Object.defineProperty;var hc=Object.getOwnPropertyDescriptor;var pc=Object.getOwnPropertyNames;var mc=Object.getPrototypeOf,gc=Object.prototype.hasOwnProperty;var ze=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var yn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yc=(e,t)=>{for(var n in t)uo(e,n,{get:t[n],enumerable:!0})},xc=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of pc(t))!gc.call(e,r)&&r!==n&&uo(e,r,{get:()=>t[r],enumerable:!(o=hc(t,r))||o.enumerable});return e};var Ge=(e,t,n)=>(n=e!=null?dc(mc(e)):{},xc(t||!e||!e.__esModule?uo(n,"default",{value:e,enumerable:!0}):n,e));var pr=yn(hr=>{"use strict";var vt=ze("react");function wc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vc=typeof Object.is=="function"?Object.is:wc,bc=vt.useState,Ec=vt.useEffect,Sc=vt.useLayoutEffect,_c=vt.useDebugValue;function Nc(e,t){var n=t(),o=bc({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return Sc(function(){r.value=n,r.getSnapshot=t,fo(r)&&i({inst:r})},[e,n,t]),Ec(function(){return fo(r)&&i({inst:r}),e(function(){fo(r)&&i({inst:r})})},[e]),_c(n),n}function fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vc(e,n)}catch{return!0}}function Cc(e,t){return t()}var Mc=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cc:Nc;hr.useSyncExternalStore=vt.useSyncExternalStore!==void 0?vt.useSyncExternalStore:Mc});var gr=yn((Bh,mr)=>{"use strict";mr.exports=pr()});var xr=yn(yr=>{"use strict";var xn=ze("react"),Ac=gr();function Ic(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kc=typeof Object.is=="function"?Object.is:Ic,Tc=Ac.useSyncExternalStore,zc=xn.useRef,Dc=xn.useEffect,$c=xn.useMemo,Pc=xn.useDebugValue;yr.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=zc(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=$c(function(){function c(h){if(!u){if(u=!0,l=h,h=o(h),r!==void 0&&s.hasValue){var x=s.value;if(r(x,h))return f=x}return f=h}if(x=f,kc(l,h))return x;var y=o(h);return r!==void 0&&r(x,y)?(l=h,x):(l=h,f=y)}var u=!1,l,f,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,o,r]);var a=Tc(e,i[0],i[1]);return Dc(function(){s.hasValue=!0,s.value=a},[a]),Pc(a),a}});var vr=yn((Lh,wr)=>{"use strict";wr.exports=xr()});var cr={};yc(cr,{Background:()=>Eh,BackgroundVariant:()=>Te,BaseEdge:()=>Ot,BezierEdge:()=>dn,ConnectionLineType:()=>Ue,ConnectionMode:()=>it,ControlButton:()=>Ht,Controls:()=>gh,EdgeLabelRenderer:()=>Bd,EdgeText:()=>Vs,Handle:()=>hn,MarkerType:()=>fn,MiniMap:()=>lh,NodeResizeControl:()=>ar,NodeResizer:()=>Ph,NodeToolbar:()=>Ih,PanOnScrollMode:()=>ot,Panel:()=>Pt,Position:()=>F,ReactFlow:()=>ir,ReactFlowProvider:()=>rr,ResizeControlVariant:()=>xt,SelectionMode:()=>Dt,SimpleBezierEdge:()=>to,SmoothStepEdge:()=>pn,StepEdge:()=>no,StraightEdge:()=>oo,addEdge:()=>Qs,applyEdgeChanges:()=>ga,applyNodeChanges:()=>or,boxToRect:()=>Wo,clamp:()=>Ve,default:()=>ir,getBezierPath:()=>Go,getBoundsOfRects:()=>qo,getConnectedEdges:()=>jo,getIncomers:()=>hf,getMarkerEnd:()=>af,getNodePositionWithOrigin:()=>Ze,getNodesBounds:()=>We,getOutgoers:()=>df,getRectOfNodes:()=>gf,getSimpleBezierPath:()=>Ko,getSmoothStepPath:()=>jn,getStraightPath:()=>qs,getTransformForBounds:()=>yf,getViewportForBounds:()=>ro,handleParentExpand:()=>Fo,internalsSymbol:()=>ie,isEdge:()=>Ks,isNode:()=>Jo,rectToBox:()=>zt,updateEdge:()=>mf,useEdges:()=>Yd,useEdgesState:()=>qd,useGetPointerPosition:()=>io,useKeyPress:()=>$t,useNodeId:()=>Rt,useNodes:()=>Fd,useNodesInitialized:()=>jd,useNodesState:()=>Wd,useOnSelectionChange:()=>Gd,useOnViewportChange:()=>Kd,useReactFlow:()=>mn,useStore:()=>Z,useStoreApi:()=>oe,useUpdateNodeInternals:()=>Vd,useViewport:()=>Zd});var p=Ge(ze("react"),1);function re(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=re(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Nr=Ge(ze("react"),1),Cr=Ge(vr(),1);var Er={},br=e=>{let t,n=new Set,o=(l,f)=>{let d=typeof l=="function"?l(t):l;if(!Object.is(d,t)){let h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(x=>x(t,h))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Er.env?Er.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(o,r,c);return c},Sr=e=>e?br(e):br;var{useDebugValue:Oc}=Nr.default,{useSyncExternalStoreWithSelector:Rc}=Cr.default,Hc=e=>e;function ho(e,t=Hc,n){let o=Rc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Oc(o),o}var _r=(e,t)=>{let n=Sr(e),o=(r,i=t)=>ho(n,r,i);return Object.assign(o,n),o},Mr=(e,t)=>e?_r(e,t):_r;function ne(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let o of e)if(!t.has(o))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Bc={value:()=>{}};function Ir(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new wn(n)}function wn(e){this._=e}function Vc(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}wn.prototype=Ir.prototype={constructor:wn,on:function(e,t){var n=this._,o=Vc(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Lc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Ar(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Ar(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Lc(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Ar(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Bc,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var ut=Ir;var vn="http://www.w3.org/1999/xhtml",po={svg:"http://www.w3.org/2000/svg",xhtml:vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fe(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),po.hasOwnProperty(t)?{space:po[t],local:e}:e}function Fc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vn&&t.documentElement.namespaceURI===vn?t.createElement(e):t.createElementNS(n,e)}}function Xc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bn(e){var t=Fe(e);return(t.local?Xc:Fc)(t)}function Yc(){}function ft(e){return e==null?Yc:function(){return this.querySelector(e)}}function kr(e){typeof e!="function"&&(e=ft(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ae(o,this._parents)}function mo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Uc(){return[]}function Vt(e){return e==null?Uc:function(){return this.querySelectorAll(e)}}function Zc(e){return function(){return mo(e.apply(this,arguments))}}function Tr(e){typeof e=="function"?e=Zc(e):e=Vt(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(o.push(e.call(c,c.__data__,u,s)),r.push(c));return new ae(o,r)}function Lt(e){return function(){return this.matches(e)}}function En(e){return function(t){return t.matches(e)}}var Wc=Array.prototype.find;function qc(e){return function(){return Wc.call(this.children,e)}}function Kc(){return this.firstElementChild}function zr(e){return this.select(e==null?Kc:qc(typeof e=="function"?e:En(e)))}var Gc=Array.prototype.filter;function Qc(){return Array.from(this.children)}function Jc(e){return function(){return Gc.call(this.children,e)}}function Dr(e){return this.selectAll(e==null?Qc:Jc(typeof e=="function"?e:En(e)))}function $r(e){typeof e!="function"&&(e=Lt(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new ae(o,this._parents)}function Sn(e){return new Array(e.length)}function Pr(){return new ae(this._enter||this._groups.map(Sn),this._parents)}function Ft(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ft.prototype={constructor:Ft,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Or(e){return function(){return e}}function jc(e,t,n,o,r,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Ft(e,i[s]);for(;s<c;++s)(a=t[s])&&(r[s]=a)}function el(e,t,n,o,r,i,s){var a,c,u=new Map,l=t.length,f=i.length,d=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(d[a]=h=s.call(c,c.__data__,a,t)+"",u.has(h)?r[a]=c:u.set(h,c));for(a=0;a<f;++a)h=s.call(e,i[a],a,i)+"",(c=u.get(h))?(o[a]=c,c.__data__=i[a],u.delete(h)):n[a]=new Ft(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(d[a])===c&&(r[a]=c)}function tl(e){return e.__data__}function Rr(e,t){if(!arguments.length)return Array.from(this,tl);var n=t?el:jc,o=this._parents,r=this._groups;typeof e!="function"&&(e=Or(e));for(var i=r.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=o[u],f=r[u],d=f.length,h=nl(e.call(l,l&&l.__data__,u,o)),x=h.length,y=a[u]=new Array(x),v=s[u]=new Array(x),g=c[u]=new Array(d);n(l,f,y,v,g,h,t);for(var S=0,C=0,w,M;S<x;++S)if(w=y[S]){for(S>=C&&(C=S+1);!(M=v[C])&&++C<x;);w._next=M||null}}return s=new ae(s,o),s._enter=a,s._exit=c,s}function nl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hr(){return new ae(this._exit||this._groups.map(Sn),this._parents)}function Br(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Vr(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),c=0;c<s;++c)for(var u=n[c],l=o[c],f=u.length,d=a[c]=new Array(f),h,x=0;x<f;++x)(h=u[x]||l[x])&&(d[x]=h);for(;c<r;++c)a[c]=n[c];return new ae(a,this._parents)}function Lr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Fr(e){e||(e=ol);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,c=r[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new ae(r,this._parents).order()}function ol(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Yr(){return Array.from(this)}function Ur(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function Zr(){let e=0;for(let t of this)++e;return e}function Wr(){return!this.node()}function qr(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function rl(e){return function(){this.removeAttribute(e)}}function il(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sl(e,t){return function(){this.setAttribute(e,t)}}function al(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ll(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kr(e,t){var n=Fe(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?il:rl:typeof t=="function"?n.local?ll:cl:n.local?al:sl)(n,t))}function _n(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ul(e){return function(){this.style.removeProperty(e)}}function fl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Gr(e,t,n){return arguments.length>1?this.each((t==null?ul:typeof t=="function"?dl:fl)(e,t,n??"")):Qe(this.node(),e)}function Qe(e,t){return e.style.getPropertyValue(t)||_n(e).getComputedStyle(e,null).getPropertyValue(t)}function hl(e){return function(){delete this[e]}}function pl(e,t){return function(){this[e]=t}}function ml(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qr(e,t){return arguments.length>1?this.each((t==null?hl:typeof t=="function"?ml:pl)(e,t)):this.node()[e]}function Jr(e){return e.trim().split(/^|\s+/)}function go(e){return e.classList||new jr(e)}function jr(e){this._node=e,this._names=Jr(e.getAttribute("class")||"")}jr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ei(e,t){for(var n=go(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ti(e,t){for(var n=go(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function gl(e){return function(){ei(this,e)}}function yl(e){return function(){ti(this,e)}}function xl(e,t){return function(){(t.apply(this,arguments)?ei:ti)(this,e)}}function ni(e,t){var n=Jr(e+"");if(arguments.length<2){for(var o=go(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?xl:t?gl:yl)(n,t))}function wl(){this.textContent=""}function vl(e){return function(){this.textContent=e}}function bl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function oi(e){return arguments.length?this.each(e==null?wl:(typeof e=="function"?bl:vl)(e)):this.node().textContent}function El(){this.innerHTML=""}function Sl(e){return function(){this.innerHTML=e}}function _l(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ri(e){return arguments.length?this.each(e==null?El:(typeof e=="function"?_l:Sl)(e)):this.node().innerHTML}function Nl(){this.nextSibling&&this.parentNode.appendChild(this)}function ii(){return this.each(Nl)}function Cl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function si(){return this.each(Cl)}function ai(e){var t=typeof e=="function"?e:bn(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ml(){return null}function ci(e,t){var n=typeof e=="function"?e:bn(e),o=t==null?Ml:typeof t=="function"?t:ft(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Al(){var e=this.parentNode;e&&e.removeChild(this)}function li(){return this.each(Al)}function Il(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ui(e){return this.select(e?kl:Il)}function fi(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tl(e){return function(t){e.call(this,t,this.__data__)}}function zl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Dl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function $l(e,t,n){return function(){var o=this.__on,r,i=Tl(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function di(e,t,n){var o=zl(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<i;++r)if((s=o[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?$l:Dl,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function hi(e,t,n){var o=_n(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Pl(e,t){return function(){return hi(this,e,t)}}function Ol(e,t){return function(){return hi(this,e,t.apply(this,arguments))}}function pi(e,t){return this.each((typeof t=="function"?Ol:Pl)(e,t))}function*mi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var yo=[null];function ae(e,t){this._groups=e,this._parents=t}function gi(){return new ae([[document.documentElement]],yo)}function Rl(){return this}ae.prototype=gi.prototype={constructor:ae,select:kr,selectAll:Tr,selectChild:zr,selectChildren:Dr,filter:$r,data:Rr,enter:Pr,exit:Hr,join:Br,merge:Vr,selection:Rl,order:Lr,sort:Fr,call:Xr,nodes:Yr,node:Ur,size:Zr,empty:Wr,each:qr,attr:Kr,style:Gr,property:Qr,classed:ni,text:oi,html:ri,raise:ii,lower:si,append:ai,insert:ci,remove:li,clone:ui,datum:fi,on:di,dispatch:pi,[Symbol.iterator]:mi};var Xe=gi;function ue(e){return typeof e=="string"?new ae([[document.querySelector(e)]],[document.documentElement]):new ae([[e]],yo)}function yi(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ye(e,t){if(e=yi(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var xi={passive:!1},dt={capture:!0,passive:!1};function Nn(e){e.stopImmediatePropagation()}function Je(e){e.preventDefault(),e.stopImmediatePropagation()}function Xt(e){var t=e.document.documentElement,n=ue(e).on("dragstart.drag",Je,dt);"onselectstart"in t?n.on("selectstart.drag",Je,dt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yt(e,t){var n=e.document.documentElement,o=ue(e).on("dragstart.drag",null);t&&(o.on("click.drag",Je,dt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ut=e=>()=>e;function Zt(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Zt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Hl(e){return!e.ctrlKey&&!e.button}function Bl(){return this.parentNode}function Vl(e,t){return t??{x:e.x,y:e.y}}function Ll(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wt(){var e=Hl,t=Bl,n=Vl,o=Ll,r={},i=ut("start","drag","end"),s=0,a,c,u,l,f=0;function d(w){w.on("mousedown.drag",h).filter(o).on("touchstart.drag",v).on("touchmove.drag",g,xi).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,M){if(!(l||!e.call(this,w,M))){var I=C(this,t.call(this,w,M),w,M,"mouse");I&&(ue(w.view).on("mousemove.drag",x,dt).on("mouseup.drag",y,dt),Xt(w.view),Nn(w),u=!1,a=w.clientX,c=w.clientY,I("start",w))}}function x(w){if(Je(w),!u){var M=w.clientX-a,I=w.clientY-c;u=M*M+I*I>f}r.mouse("drag",w)}function y(w){ue(w.view).on("mousemove.drag mouseup.drag",null),Yt(w.view,u),Je(w),r.mouse("end",w)}function v(w,M){if(e.call(this,w,M)){var I=w.changedTouches,$=t.call(this,w,M),z=I.length,P,R;for(P=0;P<z;++P)(R=C(this,$,w,M,I[P].identifier,I[P]))&&(Nn(w),R("start",w,I[P]))}}function g(w){var M=w.changedTouches,I=M.length,$,z;for($=0;$<I;++$)(z=r[M[$].identifier])&&(Je(w),z("drag",w,M[$]))}function S(w){var M=w.changedTouches,I=M.length,$,z;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),$=0;$<I;++$)(z=r[M[$].identifier])&&(Nn(w),z("end",w,M[$]))}function C(w,M,I,$,z,P){var R=i.copy(),O=ye(P||I,M),H,_,m;if((m=n.call(w,new Zt("beforestart",{sourceEvent:I,target:d,identifier:z,active:s,x:O[0],y:O[1],dx:0,dy:0,dispatch:R}),$))!=null)return H=m.x-O[0]||0,_=m.y-O[1]||0,function N(E,k,D){var b=O,A;switch(E){case"start":r[z]=N,A=s++;break;case"end":delete r[z],--s;case"drag":O=ye(D||k,M),A=s;break}R.call(E,w,new Zt(E,{sourceEvent:k,subject:m,target:d,identifier:z,active:A,x:O[0]+H,y:O[1]+_,dx:O[0]-b[0],dy:O[1]-b[1],dispatch:R}),$)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Ut(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:Ut(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Ut(w),d):n},d.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Ut(!!w),d):o},d.on=function(){var w=i.on.apply(i,arguments);return w===i?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}function Cn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xo(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Gt(){}var qt=.7,In=1/qt,bt="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fl=/^#([0-9a-f]{3,8})$/,Xl=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Yl=new RegExp(`^rgb\\(${Be},${Be},${Be}\\)$`),Ul=new RegExp(`^rgba\\(${bt},${bt},${bt},${Kt}\\)$`),Zl=new RegExp(`^rgba\\(${Be},${Be},${Be},${Kt}\\)$`),Wl=new RegExp(`^hsl\\(${Kt},${Be},${Be}\\)$`),ql=new RegExp(`^hsla\\(${Kt},${Be},${Be},${Kt}\\)$`),wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cn(Gt,je,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vi,formatHex:vi,formatHex8:Kl,formatHsl:Gl,formatRgb:bi,toString:bi});function vi(){return this.rgb().formatHex()}function Kl(){return this.rgb().formatHex8()}function Gl(){return Mi(this).formatHsl()}function bi(){return this.rgb().formatRgb()}function je(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Fl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ei(t):n===3?new be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xl.exec(e))?new be(t[1],t[2],t[3],1):(t=Yl.exec(e))?new be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ul.exec(e))?Mn(t[1],t[2],t[3],t[4]):(t=Zl.exec(e))?Mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Wl.exec(e))?Ni(t[1],t[2]/100,t[3]/100,1):(t=ql.exec(e))?Ni(t[1],t[2]/100,t[3]/100,t[4]):wi.hasOwnProperty(e)?Ei(wi[e]):e==="transparent"?new be(NaN,NaN,NaN,0):null}function Ei(e){return new be(e>>16&255,e>>8&255,e&255,1)}function Mn(e,t,n,o){return o<=0&&(e=t=n=NaN),new be(e,t,n,o)}function Ql(e){return e instanceof Gt||(e=je(e)),e?(e=e.rgb(),new be(e.r,e.g,e.b,e.opacity)):new be}function Et(e,t,n,o){return arguments.length===1?Ql(e):new be(e,t,n,o??1)}function be(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Cn(be,Et,xo(Gt,{brighter(e){return e=e==null?In:Math.pow(In,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new be(pt(this.r),pt(this.g),pt(this.b),kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Si,formatHex:Si,formatHex8:Jl,formatRgb:_i,toString:_i}));function Si(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Jl(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function _i(){let e=kn(this.opacity);return`${e===1?"rgb(":"rgba("}${pt(this.r)}, ${pt(this.g)}, ${pt(this.b)}${e===1?")":`, ${e})`}`}function kn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=pt(e),(e<16?"0":"")+e.toString(16)}function Ni(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new De(e,t,n,o)}function Mi(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof Gt||(e=je(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,c=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+r:2-i-r,s*=60):a=c>0&&c<1?0:s,new De(s,a,c,e.opacity)}function Ai(e,t,n,o){return arguments.length===1?Mi(e):new De(e,t,n,o??1)}function De(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Cn(De,Ai,xo(Gt,{brighter(e){return e=e==null?In:Math.pow(In,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qt:Math.pow(qt,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new be(wo(e>=240?e-240:e+120,r,o),wo(e,r,o),wo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new De(Ci(this.h),An(this.s),An(this.l),kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=kn(this.opacity);return`${e===1?"hsl(":"hsla("}${Ci(this.h)}, ${An(this.s)*100}%, ${An(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ci(e){return e=(e||0)%360,e<0?e+360:e}function An(e){return Math.max(0,Math.min(1,e||0))}function wo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function vo(e,t,n,o,r){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*o+s*r)/6}function Ii(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],s=o>0?e[o-1]:2*r-i,a=o<t-1?e[o+2]:2*i-r;return vo((n-o/t)*t,s,r,i,a)}}function ki(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],s=e[(o+1)%t],a=e[(o+2)%t];return vo((n-o/t)*t,r,i,s,a)}}var bo=e=>()=>e;function jl(e,t){return function(n){return e+n*t}}function eu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Ti(e){return(e=+e)==1?Tn:function(t,n){return n-t?eu(t,n,e):bo(isNaN(t)?n:t)}}function Tn(e,t){var n=t-e;return n?jl(e,n):bo(isNaN(e)?t:e)}var zn=function e(t){var n=Ti(t);function o(r,i){var s=n((r=Et(r)).r,(i=Et(i)).r),a=n(r.g,i.g),c=n(r.b,i.b),u=Tn(r.opacity,i.opacity);return function(l){return r.r=s(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return o.gamma=e,o}(1);function zi(e){return function(t){var n=t.length,o=new Array(n),r=new Array(n),i=new Array(n),s,a;for(s=0;s<n;++s)a=Et(t[s]),o[s]=a.r||0,r[s]=a.g||0,i[s]=a.b||0;return o=e(o),r=e(r),i=e(i),a.opacity=1,function(c){return a.r=o(c),a.g=r(c),a.b=i(c),a+""}}}var tu=zi(Ii),nu=zi(ki);function Me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var So=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eo=new RegExp(So.source,"g");function ou(e){return function(){return e}}function ru(e){return function(t){return e(t)+""}}function _o(e,t){var n=So.lastIndex=Eo.lastIndex=0,o,r,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(o=So.exec(e))&&(r=Eo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:Me(o,r)})),n=Eo.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?ru(c[0].x):ou(t):(t=c.length,function(u){for(var l=0,f;l<t;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}var Di=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function No(e,t,n,o,r,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Di,skewX:Math.atan(c)*Di,scaleX:s,scaleY:a}}var $n;function $i(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dn:No(t.a,t.b,t.c,t.d,t.e,t.f)}function Pi(e){return e==null?Dn:($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",e),(e=$n.transform.baseVal.consolidate())?(e=e.matrix,No(e.a,e.b,e.c,e.d,e.e,e.f)):Dn)}function Oi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,l,f,d,h,x){if(u!==f||l!==d){var y=h.push("translate(",null,t,null,n);x.push({i:y-4,x:Me(u,f)},{i:y-2,x:Me(l,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,l,f,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Me(u,l)})):l&&f.push(r(f)+"rotate("+l+o)}function a(u,l,f,d){u!==l?d.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Me(u,l)}):l&&f.push(r(f)+"skewX("+l+o)}function c(u,l,f,d,h,x){if(u!==f||l!==d){var y=h.push(r(h)+"scale(",null,",",null,")");x.push({i:y-4,x:Me(u,f)},{i:y-2,x:Me(l,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(u,l){var f=[],d=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,f,d),s(u.rotate,l.rotate,f,d),a(u.skewX,l.skewX,f,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,d),u=l=null,function(h){for(var x=-1,y=d.length,v;++x<y;)f[(v=d[x]).i]=v.x(h);return f.join("")}}}var Co=Oi($i,"px, ","px)","deg)"),Mo=Oi(Pi,", ",")",")");var iu=1e-12;function Ri(e){return((e=Math.exp(e))+1/e)/2}function su(e){return((e=Math.exp(e))-1/e)/2}function au(e){return((e=Math.exp(2*e))-1)/(e+1)}var Ao=function e(t,n,o){function r(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],f=s[1],d=s[2],h=l-a,x=f-c,y=h*h+x*x,v,g;if(y<iu)g=Math.log(d/u)/t,v=function($){return[a+$*h,c+$*x,u*Math.exp(t*$*g)]};else{var S=Math.sqrt(y),C=(d*d-u*u+o*y)/(2*u*n*S),w=(d*d-u*u-o*y)/(2*d*n*S),M=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(w*w+1)-w);g=(I-M)/t,v=function($){var z=$*g,P=Ri(M),R=u/(n*S)*(P*au(t*z+M)-su(M));return[a+R*h,c+R*x,u*P/Ri(t*z+M)]}}return v.duration=g*1e3*t/Math.SQRT2,v}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},r}(Math.SQRT2,2,4);var St=0,Jt=0,Qt=0,Bi=1e3,Pn,jt,On=0,mt=0,Rn=0,en=typeof performance=="object"&&performance.now?performance:Date,Vi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nn(){return mt||(Vi(cu),mt=en.now()+Rn)}function cu(){mt=0}function tn(){this._call=this._time=this._next=null}tn.prototype=Hn.prototype={constructor:tn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nn():+n)+(t==null?0:+t),!this._next&&jt!==this&&(jt?jt._next=this:Pn=this,jt=this),this._call=e,this._time=n,Io()},stop:function(){this._call&&(this._call=null,this._time=1/0,Io())}};function Hn(e,t,n){var o=new tn;return o.restart(e,t,n),o}function Li(){nn(),++St;for(var e=Pn,t;e;)(t=mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--St}function Hi(){mt=(On=en.now())+Rn,St=Jt=0;try{Li()}finally{St=0,uu(),mt=0}}function lu(){var e=en.now(),t=e-On;t>Bi&&(Rn-=t,On=e)}function uu(){for(var e,t=Pn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pn=n);jt=e,Io(o)}function Io(e){if(!St){Jt&&(Jt=clearTimeout(Jt));var t=e-mt;t>24?(e<1/0&&(Jt=setTimeout(Hi,e-en.now()-Rn)),Qt&&(Qt=clearInterval(Qt))):(Qt||(On=en.now(),Qt=setInterval(lu,Bi)),St=1,Vi(Hi))}}function Bn(e,t,n){var o=new tn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var fu=ut("start","end","cancel","interrupt"),du=[],Yi=0,Fi=1,Ln=2,Vn=3,Xi=4,Fn=5,on=6;function et(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;hu(e,n,{name:t,index:o,group:r,on:fu,tween:du,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Yi})}function rn(e,t){var n=de(e,t);if(n.state>Yi)throw new Error("too late; already scheduled");return n}function me(e,t){var n=de(e,t);if(n.state>Vn)throw new Error("too late; already running");return n}function de(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Hn(i,0,n.time);function i(u){n.state=Fi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,f,d,h;if(n.state!==Fi)return c();for(l in o)if(h=o[l],h.name===n.name){if(h.state===Vn)return Bn(s);h.state===Xi?(h.state=on,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[l]):+l<t&&(h.state=on,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[l])}if(Bn(function(){n.state===Vn&&(n.state=Xi,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ln,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ln){for(n.state=Vn,r=new Array(d=n.tween.length),l=0,f=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Fn,1),f=-1,d=r.length;++f<d;)r[f].call(e,l);n.state===Fn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=on,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function gt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Ln&&o.state<Fn,o.state=on,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function Ui(e){return this.each(function(){gt(this,e)})}function pu(e,t){var n,o;return function(){var r=me(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function mu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=me(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}i.tween=r}}function Zi(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=de(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?pu:mu)(n,e,t))}function _t(e,t,n){var o=e._id;return e.each(function(){var r=me(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return de(r,o).value[t]}}function Xn(e,t){var n;return(typeof t=="number"?Me:t instanceof je?zn:(n=je(t))?(t=n,zn):_o)(e,t)}function gu(e){return function(){this.removeAttribute(e)}}function yu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xu(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function wu(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function vu(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function bu(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function Wi(e,t){var n=Fe(e),o=n==="transform"?Mo:Xn;return this.attrTween(e,typeof t=="function"?(n.local?bu:vu)(n,o,_t(this,"attr."+e,t)):t==null?(n.local?yu:gu)(n):(n.local?wu:xu)(n,o,t))}function Eu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Su(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _u(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Su(e,i)),n}return r._value=t,r}function Nu(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Eu(e,i)),n}return r._value=t,r}function qi(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Fe(e);return this.tween(n,(o.local?_u:Nu)(o,t))}function Cu(e,t){return function(){rn(this,e).delay=+t.apply(this,arguments)}}function Mu(e,t){return t=+t,function(){rn(this,e).delay=t}}function Ki(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cu:Mu)(t,e)):de(this.node(),t).delay}function Au(e,t){return function(){me(this,e).duration=+t.apply(this,arguments)}}function Iu(e,t){return t=+t,function(){me(this,e).duration=t}}function Gi(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Au:Iu)(t,e)):de(this.node(),t).duration}function ku(e,t){if(typeof t!="function")throw new Error;return function(){me(this,e).ease=t}}function Qi(e){var t=this._id;return arguments.length?this.each(ku(t,e)):de(this.node(),t).ease}function Tu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;me(this,e).ease=n}}function Ji(e){if(typeof e!="function")throw new Error;return this.each(Tu(this._id,e))}function ji(e){typeof e!="function"&&(e=Lt(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new xe(o,this._parents,this._name,this._id)}function es(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,f=s[a]=new Array(l),d,h=0;h<l;++h)(d=c[h]||u[h])&&(f[h]=d);for(;a<o;++a)s[a]=t[a];return new xe(s,this._parents,this._name,this._id)}function zu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Du(e,t,n){var o,r,i=zu(t)?rn:me;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function ts(e,t){var n=this._id;return arguments.length<2?de(this.node(),n).on.on(e):this.each(Du(n,e,t))}function $u(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ns(){return this.on("end.remove",$u(this._id))}function os(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ft(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],c=a.length,u=i[s]=new Array(c),l,f,d=0;d<c;++d)(l=a[d])&&(f=e.call(l,l.__data__,d,a))&&("__data__"in l&&(f.__data__=l.__data__),u[d]=f,et(u[d],t,n,d,u,de(l,n)));return new xe(i,this._parents,t,n)}function rs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Vt(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var c=o[a],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var d=e.call(l,l.__data__,f,c),h,x=de(l,n),y=0,v=d.length;y<v;++y)(h=d[y])&&et(h,t,n,y,d,x);i.push(d),s.push(l)}return new xe(i,s,t,n)}var Pu=Xe.prototype.constructor;function is(){return new Pu(this._groups,this._parents)}function Ou(e,t){var n,o,r;return function(){var i=Qe(this,e),s=(this.style.removeProperty(e),Qe(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function ss(e){return function(){this.style.removeProperty(e)}}function Ru(e,t,n){var o,r=n+"",i;return function(){var s=Qe(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Hu(e,t,n){var o,r,i;return function(){var s=Qe(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Qe(this,e))),s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a))}}function Bu(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var c=me(this,e),u=c.on,l=c.value[i]==null?a||(a=ss(t)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(s,r=l),c.on=o}}function as(e,t,n){var o=(e+="")=="transform"?Co:Xn;return t==null?this.styleTween(e,Ou(e,o)).on("end.style."+e,ss(e)):typeof t=="function"?this.styleTween(e,Hu(e,o,_t(this,"style."+e,t))).each(Bu(this._id,e)):this.styleTween(e,Ru(e,o,t),n).on("end.style."+e,null)}function Vu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Lu(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Vu(e,s,n)),o}return i._value=t,i}function cs(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Lu(e,t,n??""))}function Fu(e){return function(){this.textContent=e}}function Xu(e){return function(){var t=e(this);this.textContent=t??""}}function ls(e){return this.tween("text",typeof e=="function"?Xu(_t(this,"text",e)):Fu(e==null?"":e+""))}function Yu(e){return function(t){this.textContent=e.call(this,t)}}function Uu(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Yu(r)),t}return o._value=e,o}function us(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Uu(e))}function fs(){for(var e=this._name,t=this._id,n=Yn(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=de(c,t);et(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new xe(o,this._parents,e,n)}function ds(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--r===0&&i()}};n.each(function(){var u=me(this,o),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&i()})}var Zu=0;function xe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function hs(e){return Xe().transition(e)}function Yn(){return++Zu}var Ye=Xe.prototype;xe.prototype=hs.prototype={constructor:xe,select:os,selectAll:rs,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:ji,merge:es,selection:is,transition:fs,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:ts,attr:Wi,attrTween:qi,style:as,styleTween:cs,text:ls,textTween:us,remove:ns,tween:Zi,delay:Ki,duration:Gi,ease:Qi,easeVarying:Ji,end:ds,[Symbol.iterator]:Ye[Symbol.iterator]};function Un(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Wu={time:null,delay:0,duration:250,ease:Un};function qu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ps(e){var t,n;e instanceof xe?(t=e._id,e=e._name):(t=Yn(),(n=Wu).time=nn(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&et(c,e,t,u,s,n||qu(c,t));return new xe(o,this._parents,e,t)}Xe.prototype.interrupt=Ui;Xe.prototype.transition=ps;var sn=e=>()=>e;function ko(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function $e(e,t,n){this.k=e,this.x=t,this.y=n}$e.prototype={constructor:$e,scale:function(e){return e===1?this:new $e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ee=new $e(1,0,0);To.prototype=$e.prototype;function To(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ee;return e.__zoom}function Zn(e){e.stopImmediatePropagation()}function Nt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ku(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ms(){return this.__zoom||Ee}function Qu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function ju(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function an(){var e=Ku,t=Gu,n=ju,o=Qu,r=Ju,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Ao,u=ut("start","zoom","end"),l,f,d,h=500,x=150,y=0,v=10;function g(m){m.property("__zoom",ms).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",R).filter(r).on("touchstart.zoom",O).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(m,N,E,k){var D=m.selection?m.selection():m;D.property("__zoom",ms),m!==D?M(m,N,E,k):D.interrupt().each(function(){I(this,arguments).event(k).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},g.scaleBy=function(m,N,E,k){g.scaleTo(m,function(){var D=this.__zoom.k,b=typeof N=="function"?N.apply(this,arguments):N;return D*b},E,k)},g.scaleTo=function(m,N,E,k){g.transform(m,function(){var D=t.apply(this,arguments),b=this.__zoom,A=E==null?w(D):typeof E=="function"?E.apply(this,arguments):E,T=b.invert(A),B=typeof N=="function"?N.apply(this,arguments):N;return n(C(S(b,B),A,T),D,s)},E,k)},g.translateBy=function(m,N,E,k){g.transform(m,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),s)},null,k)},g.translateTo=function(m,N,E,k,D){g.transform(m,function(){var b=t.apply(this,arguments),A=this.__zoom,T=k==null?w(b):typeof k=="function"?k.apply(this,arguments):k;return n(Ee.translate(T[0],T[1]).scale(A.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof E=="function"?-E.apply(this,arguments):-E),b,s)},k,D)};function S(m,N){return N=Math.max(i[0],Math.min(i[1],N)),N===m.k?m:new $e(N,m.x,m.y)}function C(m,N,E){var k=N[0]-E[0]*m.k,D=N[1]-E[1]*m.k;return k===m.x&&D===m.y?m:new $e(m.k,k,D)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function M(m,N,E,k){m.on("start.zoom",function(){I(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(k).end()}).tween("zoom",function(){var D=this,b=arguments,A=I(D,b).event(k),T=t.apply(D,b),B=E==null?w(T):typeof E=="function"?E.apply(D,b):E,X=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),V=D.__zoom,Y=typeof N=="function"?N.apply(D,b):N,U=c(V.invert(B).concat(X/V.k),Y.invert(B).concat(X/Y.k));return function(q){if(q===1)q=Y;else{var Q=U(q),K=X/Q[2];q=new $e(K,B[0]-Q[0]*K,B[1]-Q[1]*K)}A.zoom(null,q)}})}function I(m,N,E){return!E&&m.__zooming||new $(m,N)}function $(m,N){this.that=m,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,N),this.taps=0}$.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,N){return this.mouse&&m!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var N=ue(this.that).datum();u.call(m,this.that,new ko(m,{sourceEvent:this.sourceEvent,target:g,type:m,transform:this.that.__zoom,dispatch:u}),N)}};function z(m,...N){if(!e.apply(this,arguments))return;var E=I(this,N).event(m),k=this.__zoom,D=Math.max(i[0],Math.min(i[1],k.k*Math.pow(2,o.apply(this,arguments)))),b=ye(m);if(E.wheel)(E.mouse[0][0]!==b[0]||E.mouse[0][1]!==b[1])&&(E.mouse[1]=k.invert(E.mouse[0]=b)),clearTimeout(E.wheel);else{if(k.k===D)return;E.mouse=[b,k.invert(b)],gt(this),E.start()}Nt(m),E.wheel=setTimeout(A,x),E.zoom("mouse",n(C(S(k,D),E.mouse[0],E.mouse[1]),E.extent,s));function A(){E.wheel=null,E.end()}}function P(m,...N){if(d||!e.apply(this,arguments))return;var E=m.currentTarget,k=I(this,N,!0).event(m),D=ue(m.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",X,!0),b=ye(m,E),A=m.clientX,T=m.clientY;Xt(m.view),Zn(m),k.mouse=[b,this.__zoom.invert(b)],gt(this),k.start();function B(V){if(Nt(V),!k.moved){var Y=V.clientX-A,U=V.clientY-T;k.moved=Y*Y+U*U>y}k.event(V).zoom("mouse",n(C(k.that.__zoom,k.mouse[0]=ye(V,E),k.mouse[1]),k.extent,s))}function X(V){D.on("mousemove.zoom mouseup.zoom",null),Yt(V.view,k.moved),Nt(V),k.event(V).end()}}function R(m,...N){if(e.apply(this,arguments)){var E=this.__zoom,k=ye(m.changedTouches?m.changedTouches[0]:m,this),D=E.invert(k),b=E.k*(m.shiftKey?.5:2),A=n(C(S(E,b),k,D),t.apply(this,N),s);Nt(m),a>0?ue(this).transition().duration(a).call(M,A,k,m):ue(this).call(g.transform,A,k,m)}}function O(m,...N){if(e.apply(this,arguments)){var E=m.touches,k=E.length,D=I(this,N,m.changedTouches.length===k).event(m),b,A,T,B;for(Zn(m),A=0;A<k;++A)T=E[A],B=ye(T,this),B=[B,this.__zoom.invert(B),T.identifier],D.touch0?!D.touch1&&D.touch0[2]!==B[2]&&(D.touch1=B,D.taps=0):(D.touch0=B,b=!0,D.taps=1+!!l);l&&(l=clearTimeout(l)),b&&(D.taps<2&&(f=B[0],l=setTimeout(function(){l=null},h)),gt(this),D.start())}}function H(m,...N){if(this.__zooming){var E=I(this,N).event(m),k=m.changedTouches,D=k.length,b,A,T,B;for(Nt(m),b=0;b<D;++b)A=k[b],T=ye(A,this),E.touch0&&E.touch0[2]===A.identifier?E.touch0[0]=T:E.touch1&&E.touch1[2]===A.identifier&&(E.touch1[0]=T);if(A=E.that.__zoom,E.touch1){var X=E.touch0[0],V=E.touch0[1],Y=E.touch1[0],U=E.touch1[1],q=(q=Y[0]-X[0])*q+(q=Y[1]-X[1])*q,Q=(Q=U[0]-V[0])*Q+(Q=U[1]-V[1])*Q;A=S(A,Math.sqrt(q/Q)),T=[(X[0]+Y[0])/2,(X[1]+Y[1])/2],B=[(V[0]+U[0])/2,(V[1]+U[1])/2]}else if(E.touch0)T=E.touch0[0],B=E.touch0[1];else return;E.zoom("touch",n(C(A,T,B),E.extent,s))}}function _(m,...N){if(this.__zooming){var E=I(this,N).event(m),k=m.changedTouches,D=k.length,b,A;for(Zn(m),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),b=0;b<D;++b)A=k[b],E.touch0&&E.touch0[2]===A.identifier?delete E.touch0:E.touch1&&E.touch1[2]===A.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(A=ye(A,this),Math.hypot(f[0]-A[0],f[1]-A[1])<v)){var T=ue(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return g.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:sn(+m),g):o},g.filter=function(m){return arguments.length?(e=typeof m=="function"?m:sn(!!m),g):e},g.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:sn(!!m),g):r},g.extent=function(m){return arguments.length?(t=typeof m=="function"?m:sn([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),g):t},g.scaleExtent=function(m){return arguments.length?(i[0]=+m[0],i[1]=+m[1],g):[i[0],i[1]]},g.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(m){return arguments.length?(n=m,g):n},g.duration=function(m){return arguments.length?(a=+m,g):a},g.interpolate=function(m){return arguments.length?(c=m,g):c},g.on=function(){var m=u.on.apply(u,arguments);return m===u?g:m},g.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,g):Math.sqrt(y)},g.tapDistance=function(m){return arguments.length?(v=+m,g):v},g}var Hs=ze("react-dom"),eo=(0,p.createContext)(null),ef=eo.Provider,Ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Bs=Ie.error001();function Z(e,t){let n=(0,p.useContext)(eo);if(n===null)throw new Error(Bs);return ho(n,e,t)}var oe=()=>{let e=(0,p.useContext)(eo);if(e===null)throw new Error(Bs);return(0,p.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},tf=e=>e.userSelectionActive?"none":"all";function Pt({position:e,children:t,className:n,style:o,...r}){let i=Z(tf),s=`${e}`.split("-");return p.default.createElement("div",{className:re(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},t)}function nf({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:p.default.createElement(Pt,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},p.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var of=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{let f=(0,p.useRef)(null),[d,h]=(0,p.useState)({x:0,y:0,width:0,height:0}),x=re(["react-flow__edge-textwrapper",u]);return(0,p.useEffect)(()=>{if(f.current){let y=f.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:p.default.createElement("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:x,visibility:d.width?"visible":"hidden",...l},r&&p.default.createElement("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),p.default.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:o},n),c)},Vs=(0,p.memo)(of),Uo=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ve=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Zo=(e={x:0,y:0},t)=>({x:Ve(e.x,t[0][0],t[1][0]),y:Ve(e.y,t[0][1],t[1][1])}),gs=(e,t,n)=>e<t?Ve(Math.abs(e-t),1,50)/50:e>n?-Ve(Math.abs(e-n),1,50)/50:0,Ls=(e,t)=>{let n=gs(e.x,35,t.width-35)*20,o=gs(e.y,35,t.height-35)*20;return[n,o]},Fs=e=>e.getRootNode?.()||window?.document,Xs=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),zt=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Wo=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ys=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),qo=(e,t)=>Wo(Xs(zt(e),zt(t))),Ro=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},rf=e=>Ae(e.width)&&Ae(e.height)&&Ae(e.x)&&Ae(e.y),Ae=e=>!isNaN(e)&&isFinite(e),ie=Symbol.for("internals"),Ys=["Enter"," ","Escape"],Qn=(e,t)=>{},sf=e=>"nativeEvent"in e;function Ho(e){let n=(sf(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}var Us=e=>"clientX"in e,rt=(e,t)=>{let n=Us(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Jn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Ot=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:d,interactionWidth:h=20})=>p.default.createElement(p.default.Fragment,null,p.default.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:d}),h&&p.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&Ae(n)&&Ae(o)?p.default.createElement(Vs,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Ot.displayName="BaseEdge";var af=(e,t)=>typeof t<"u"&&t?`url(#${t})`:typeof e<"u"?`url(#react-flow__${e})`:"none";function cn(e,t,n){return n===void 0?n:o=>{let r=t().edges.find(i=>i.id===e);r&&n(o,{...r})}}function Zs({sourceX:e,sourceY:t,targetX:n,targetY:o}){let r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function Ws({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){let c=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,l=Math.abs(c-e),f=Math.abs(u-t);return[c,u,l,f]}var it;(function(e){e.Strict="strict",e.Loose="loose"})(it||(it={}));var ot;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ot||(ot={}));var Dt;(function(e){e.Partial="partial",e.Full="full"})(Dt||(Dt={}));var Ue;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ue||(Ue={}));var fn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fn||(fn={}));var F;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(F||(F={}));function xs({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===F.Left||e===F.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Ko({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:r,targetPosition:i=F.Top}){let[s,a]=xs({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,u]=xs({pos:i,x1:o,y1:r,x2:e,y2:t}),[l,f,d,h]=Ws({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${o},${r}`,l,f,d,h]}var to=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=F.Bottom,targetPosition:i=F.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:y})=>{let[v,g,S]=Ko({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return p.default.createElement(Ot,{path:v,labelX:g,labelY:S,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:y})});to.displayName="SimpleBezierEdge";var ws={[F.Left]:{x:-1,y:0},[F.Right]:{x:1,y:0},[F.Top]:{x:0,y:-1},[F.Bottom]:{x:0,y:1}},cf=({source:e,sourcePosition:t=F.Bottom,target:n})=>t===F.Left||t===F.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lf({source:e,sourcePosition:t=F.Bottom,target:n,targetPosition:o=F.Top,center:r,offset:i}){let s=ws[t],a=ws[o],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=cf({source:c,sourcePosition:t,target:u}),f=l.x!==0?"x":"y",d=l[f],h=[],x,y,v={x:0,y:0},g={x:0,y:0},[S,C,w,M]=Zs({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){x=r.x||S,y=r.y||C;let $=[{x,y:c.y},{x,y:u.y}],z=[{x:c.x,y},{x:u.x,y}];s[f]===d?h=f==="x"?$:z:h=f==="x"?z:$}else{let $=[{x:c.x,y:u.y}],z=[{x:u.x,y:c.y}];if(f==="x"?h=s.x===d?z:$:h=s.y===d?$:z,t===o){let _=Math.abs(e[f]-n[f]);if(_<=i){let m=Math.min(i-1,i-_);s[f]===d?v[f]=(c[f]>e[f]?-1:1)*m:g[f]=(u[f]>n[f]?-1:1)*m}}if(t!==o){let _=f==="x"?"y":"x",m=s[f]===a[_],N=c[_]>u[_],E=c[_]<u[_];(s[f]===1&&(!m&&N||m&&E)||s[f]!==1&&(!m&&E||m&&N))&&(h=f==="x"?$:z)}let P={x:c.x+v.x,y:c.y+v.y},R={x:u.x+g.x,y:u.y+g.y},O=Math.max(Math.abs(P.x-h[0].x),Math.abs(R.x-h[0].x)),H=Math.max(Math.abs(P.y-h[0].y),Math.abs(R.y-h[0].y));O>=H?(x=(P.x+R.x)/2,y=h[0].y):(x=h[0].x,y=(P.y+R.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...h,{x:u.x+g.x,y:u.y+g.y},n],x,y,w,M]}function uf(e,t,n,o){let r=Math.min(vs(e,t)/2,vs(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){let u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*l}`}let a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+r*c}Q ${i},${s} ${i+r*a},${s}`}function jn({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:r,targetPosition:i=F.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){let[l,f,d,h,x]=lf({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((v,g,S)=>{let C="";return S>0&&S<l.length-1?C=uf(l[S-1],g,l[S+1],s):C=`${S===0?"M":"L"}${g.x} ${g.y}`,v+=C,v},""),f,d,h,x]}var pn=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:f=F.Bottom,targetPosition:d=F.Top,markerEnd:h,markerStart:x,pathOptions:y,interactionWidth:v})=>{let[g,S,C]=jn({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:d,borderRadius:y?.borderRadius,offset:y?.offset});return p.default.createElement(Ot,{path:g,labelX:S,labelY:C,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:x,interactionWidth:v})});pn.displayName="SmoothStepEdge";var no=(0,p.memo)(e=>p.default.createElement(pn,{...e,pathOptions:(0,p.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));no.displayName="StepEdge";function qs({sourceX:e,sourceY:t,targetX:n,targetY:o}){let[r,i,s,a]=Zs({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}var oo=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:d,interactionWidth:h})=>{let[x,y,v]=qs({sourceX:e,sourceY:t,targetX:n,targetY:o});return p.default.createElement(Ot,{path:x,labelX:y,labelY:v,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:d,interactionWidth:h})});oo.displayName="StraightEdge";function Wn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function bs({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case F.Left:return[t-Wn(t-o,i),n];case F.Right:return[t+Wn(o-t,i),n];case F.Top:return[t,n-Wn(n-r,i)];case F.Bottom:return[t,n+Wn(r-n,i)]}}function Go({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:o,targetY:r,targetPosition:i=F.Top,curvature:s=.25}){let[a,c]=bs({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[u,l]=bs({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[f,d,h,x]=Ws({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${o},${r}`,f,d,h,x]}var dn=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=F.Bottom,targetPosition:i=F.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,pathOptions:y,interactionWidth:v})=>{let[g,S,C]=Go({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:y?.curvature});return p.default.createElement(Ot,{path:g,labelX:S,labelY:C,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:v})});dn.displayName="BezierEdge";var Qo=(0,p.createContext)(null),ff=Qo.Provider;Qo.Consumer;var Rt=()=>(0,p.useContext)(Qo),Ks=e=>"id"in e&&"source"in e&&"target"in e,Jo=e=>"id"in e&&!("source"in e)&&!("target"in e),df=(e,t,n)=>{if(!Jo(e))return[];let o=n.filter(r=>r.source===e.id).map(r=>r.target);return t.filter(r=>o.includes(r.id))},hf=(e,t,n)=>{if(!Jo(e))return[];let o=n.filter(r=>r.target===e.id).map(r=>r.source);return t.filter(r=>o.includes(r.id))},Gs=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Bo=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,pf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Qs=(e,t)=>{if(!e.source||!e.target)return Qn("006",Ie.error006()),t;let n;return Ks(e)?n={...e}:n={...e,id:Gs(e)},pf(n,t)?t:t.concat(n)},mf=(e,t,n,o={shouldReplaceId:!0})=>{let{id:r,...i}=e;if(!t.source||!t.target)return Qn("006",Ie.error006()),n;if(!n.find(c=>c.id===r))return Qn("007",Ie.error007(r)),n;let a={...i,id:o.shouldReplaceId?Gs(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.filter(c=>c.id!==r).concat(a)},Vo=({x:e,y:t},[n,o,r],i,[s,a])=>{let c={x:(e-n)/r,y:(t-o)/r};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},Js=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Ze=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},We=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};let n=e.reduce((o,r)=>{let{x:i,y:s}=Ze(r,t);return Xs(o,zt({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wo(n)},gf=(e,t=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),We(e,t)),js=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1,a=[0,0])=>{let c={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(l=>{let{width:f,height:d,selectable:h=!0,hidden:x=!1}=l;if(s&&!h||x)return!1;let{positionAbsolute:y}=Ze(l,a),v={x:y.x,y:y.y,width:f||0,height:d||0},g=Ro(c,v),S=typeof f>"u"||typeof d>"u"||f===null||d===null,C=i&&g>0,w=(f||0)*(d||0);(S||C||g>=w||l.dragging)&&u.push(l)}),u},jo=(e,t)=>{let n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},yf=(e,t,n,o,r,i=.1)=>{let{x:s,y:a,zoom:c}=ro(e,t,n,o,r,i);return console.warn("[DEPRECATED] `getTransformForBounds` is deprecated. Instead use `getViewportForBounds`. Beware that the return value is type Viewport (`{ x: number, y: number, zoom: number }`) instead of Transform (`[number, number, number]`). https://reactflow.dev/api-reference/utils/get-viewport-for-bounds"),[s,a,c]},ro=(e,t,n,o,r,i=.1)=>{let s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=Ve(c,o,r),l=e.x+e.width/2,f=e.y+e.height/2,d=t/2-l*u,h=n/2-f*u;return{x:d,y:h,zoom:u}},yt=(e,t=0)=>e.transition().duration(t);function Es(e,t,n,o){return(t[n]||[]).reduce((r,i)=>(`${e.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),r),[])}function xf(e,t,n,o,r,i){let{x:s,y:a}=rt(e),u=t.elementsFromPoint(s,a).find(x=>x.classList.contains("react-flow__handle"));if(u){let x=u.getAttribute("data-nodeid");if(x){let y=er(void 0,u),v=u.getAttribute("data-handleid"),g=i({nodeId:x,id:v,type:y});if(g){let S=r.find(C=>C.nodeId===x&&C.type===y&&C.id===v);return{handle:{id:v,type:y,nodeId:x,x:S?.x||n.x,y:S?.y||n.y},validHandleResult:g}}}}let l=[],f=1/0;if(r.forEach(x=>{let y=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(y<=o){let v=i(x);y<=f&&(y<f?l=[{handle:x,validHandleResult:v}]:y===f&&l.push({handle:x,validHandleResult:v}),f=y)}}),!l.length)return{handle:null,validHandleResult:ea()};if(l.length===1)return l[0];let d=l.some(({validHandleResult:x})=>x.isValid),h=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:y})=>h?x.type==="target":d?y.isValid:!0)||l[0]}var wf={source:null,target:null,sourceHandle:null,targetHandle:null},ea=()=>({handleDomNode:null,isValid:!1,connection:wf,endHandle:null});function ta(e,t,n,o,r,i,s){let a=r==="target",c=s.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...ea(),handleDomNode:c};if(c){let l=er(void 0,c),f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),y={source:a?f:n,sourceHandle:a?d:o,target:a?n:f,targetHandle:a?o:d};u.connection=y,h&&x&&(t===it.Strict?a&&l==="source"||!a&&l==="target":f!==n||d!==o)&&(u.endHandle={nodeId:f,handleId:d,type:l},u.isValid=i(y))}return u}function vf({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,i)=>{if(i[ie]){let{handleBounds:s}=i[ie],a=[],c=[];s&&(a=Es(i,s,"source",`${t}-${n}-${o}`),c=Es(i,s,"target",`${t}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function er(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function zo(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function bf(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function na({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onEdgeUpdateEnd:u}){let l=Fs(e.target),{connectionMode:f,domNode:d,autoPanOnConnect:h,connectionRadius:x,onConnectStart:y,panBy:v,getNodes:g,cancelConnection:S}=i(),C=0,w,{x:M,y:I}=rt(e),$=l?.elementFromPoint(M,I),z=er(c,$),P=d?.getBoundingClientRect();if(!P||!z)return;let R,O=rt(e,P),H=!1,_=null,m=!1,N=null,E=vf({nodes:g(),nodeId:n,handleId:t,handleType:z}),k=()=>{if(!h)return;let[A,T]=Ls(O,P);v({x:A,y:T}),C=requestAnimationFrame(k)};s({connectionPosition:O,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:z,connectionStartHandle:{nodeId:n,handleId:t,type:z},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:z});function D(A){let{transform:T}=i();O=rt(A,P);let{handle:B,validHandleResult:X}=xf(A,l,Vo(O,T,!1,[1,1]),x,E,V=>ta(V,f,n,t,r?"target":"source",a,l));if(w=B,H||(k(),H=!0),N=X.handleDomNode,_=X.connection,m=X.isValid,s({connectionPosition:w&&m?Js({x:w.x,y:w.y},T):O,connectionStatus:bf(!!w,m),connectionEndHandle:X.endHandle}),!w&&!m&&!N)return zo(R);_.source!==_.target&&N&&(zo(R),R=N,N.classList.add("connecting","react-flow__handle-connecting"),N.classList.toggle("valid",m),N.classList.toggle("react-flow__handle-valid",m))}function b(A){(w||N)&&_&&m&&o?.(_),i().onConnectEnd?.(A),c&&u?.(A),zo(R),S(),cancelAnimationFrame(C),H=!1,m=!1,_=null,N=null,l.removeEventListener("mousemove",D),l.removeEventListener("mouseup",b),l.removeEventListener("touchmove",D),l.removeEventListener("touchend",b)}l.addEventListener("mousemove",D),l.addEventListener("mouseup",b),l.addEventListener("touchmove",D),l.addEventListener("touchend",b)}var Ss=()=>!0,Ef=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Sf=(e,t,n)=>o=>{let{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:r?.nodeId===e&&r?.handleId===t&&r?.type===n||i?.nodeId===e&&i?.handleId===t&&i?.type===n,clickConnecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n}},oa=(0,p.forwardRef)(({type:e="source",position:t=F.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:f,...d},h)=>{let x=s||null,y=e==="target",v=oe(),g=Rt(),{connectOnClick:S,noPanClassName:C}=Z(Ef,ne),{connecting:w,clickConnecting:M}=Z(Sf(g,x,e),ne);g||v.getState().onError?.("010",Ie.error010());let I=P=>{let{defaultEdgeOptions:R,onConnect:O,hasDefaultEdges:H}=v.getState(),_={...R,...P};if(H){let{edges:m,setEdges:N}=v.getState();N(Qs(_,m))}O?.(_),a?.(_)},$=P=>{if(!g)return;let R=Us(P);r&&(R&&P.button===0||!R)&&na({event:P,handleId:x,nodeId:g,onConnect:I,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||Ss}),R?l?.(P):f?.(P)},z=P=>{let{onClickConnectStart:R,onClickConnectEnd:O,connectionClickStartHandle:H,connectionMode:_,isValidConnection:m}=v.getState();if(!g||!H&&!r)return;if(!H){R?.(P,{nodeId:g,handleId:x,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:x}});return}let N=Fs(P.target),E=n||m||Ss,{connection:k,isValid:D}=ta({nodeId:g,id:x,type:e},_,H.nodeId,H.handleId||null,H.type,E,N);D&&I(k),O?.(P),v.setState({connectionClickStartHandle:null})};return p.default.createElement("div",{"data-handleid":x,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${x}-${e}`,className:re(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!y,target:y,connectable:o,connectablestart:r,connectableend:i,connecting:M,connectionindicator:o&&(r&&!w||i&&w)}]),onMouseDown:$,onTouchStart:$,onClick:S?z:void 0,ref:h,...d},c)});oa.displayName="Handle";var hn=(0,p.memo)(oa),ra=({data:e,isConnectable:t,targetPosition:n=F.Top,sourcePosition:o=F.Bottom})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(hn,{type:"target",position:n,isConnectable:t}),e?.label,p.default.createElement(hn,{type:"source",position:o,isConnectable:t}));ra.displayName="DefaultNode";var Lo=(0,p.memo)(ra),ia=({data:e,isConnectable:t,sourcePosition:n=F.Bottom})=>p.default.createElement(p.default.Fragment,null,e?.label,p.default.createElement(hn,{type:"source",position:n,isConnectable:t}));ia.displayName="InputNode";var sa=(0,p.memo)(ia),aa=({data:e,isConnectable:t,targetPosition:n=F.Top})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(hn,{type:"target",position:n,isConnectable:t}),e?.label);aa.displayName="OutputNode";var ca=(0,p.memo)(aa),tr=()=>null;tr.displayName="GroupNode";var _f=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),qn=e=>e.id;function Nf(e,t){return ne(e.selectedNodes.map(qn),t.selectedNodes.map(qn))&&ne(e.selectedEdges.map(qn),t.selectedEdges.map(qn))}var la=(0,p.memo)(({onSelectionChange:e})=>{let t=oe(),{selectedNodes:n,selectedEdges:o}=Z(_f,Nf);return(0,p.useEffect)(()=>{let r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,o,e]),null});la.displayName="SelectionListener";var Cf=e=>!!e.onSelectionChange;function Mf({onSelectionChange:e}){let t=Z(Cf);return e||t?p.default.createElement(la,{onSelectionChange:e}):null}var Af=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ct(e,t){(0,p.useEffect)(()=>{typeof e<"u"&&t(e)},[e])}function W(e,t,n){(0,p.useEffect)(()=>{typeof t<"u"&&n({[e]:t})},[t])}var If=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:f,edgesFocusable:d,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:y,maxZoom:v,nodeExtent:g,onNodesChange:S,onEdgesChange:C,elementsSelectable:w,connectionMode:M,snapGrid:I,snapToGrid:$,translateExtent:z,connectOnClick:P,defaultEdgeOptions:R,fitView:O,fitViewOptions:H,onNodesDelete:_,onEdgesDelete:m,onNodeDrag:N,onNodeDragStart:E,onNodeDragStop:k,onSelectionDrag:D,onSelectionDragStart:b,onSelectionDragStop:A,noPanClassName:T,nodeOrigin:B,rfId:X,autoPanOnConnect:V,autoPanOnNodeDrag:Y,onError:U,connectionRadius:q,isValidConnection:Q,nodeDragThreshold:K})=>{let{setNodes:G,setEdges:j,setDefaultNodesAndEdges:ce,setMinZoom:pe,setMaxZoom:te,setTranslateExtent:ee,setNodeExtent:le,reset:fe}=Z(Af,ne),L=oe();return(0,p.useEffect)(()=>{let se=o?.map(_e=>({..._e,...R}));return ce(n,se),()=>{fe()}},[]),W("defaultEdgeOptions",R,L.setState),W("connectionMode",M,L.setState),W("onConnect",r,L.setState),W("onConnectStart",i,L.setState),W("onConnectEnd",s,L.setState),W("onClickConnectStart",a,L.setState),W("onClickConnectEnd",c,L.setState),W("nodesDraggable",u,L.setState),W("nodesConnectable",l,L.setState),W("nodesFocusable",f,L.setState),W("edgesFocusable",d,L.setState),W("edgesUpdatable",h,L.setState),W("elementsSelectable",w,L.setState),W("elevateNodesOnSelect",x,L.setState),W("snapToGrid",$,L.setState),W("snapGrid",I,L.setState),W("onNodesChange",S,L.setState),W("onEdgesChange",C,L.setState),W("connectOnClick",P,L.setState),W("fitViewOnInit",O,L.setState),W("fitViewOnInitOptions",H,L.setState),W("onNodesDelete",_,L.setState),W("onEdgesDelete",m,L.setState),W("onNodeDrag",N,L.setState),W("onNodeDragStart",E,L.setState),W("onNodeDragStop",k,L.setState),W("onSelectionDrag",D,L.setState),W("onSelectionDragStart",b,L.setState),W("onSelectionDragStop",A,L.setState),W("noPanClassName",T,L.setState),W("nodeOrigin",B,L.setState),W("rfId",X,L.setState),W("autoPanOnConnect",V,L.setState),W("autoPanOnNodeDrag",Y,L.setState),W("onError",U,L.setState),W("connectionRadius",q,L.setState),W("isValidConnection",Q,L.setState),W("nodeDragThreshold",K,L.setState),Ct(e,G),Ct(t,j),Ct(y,pe),Ct(v,te),Ct(z,ee),Ct(g,le),null},_s={display:"none"},kf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ua="react-flow__node-desc",fa="react-flow__edge-desc",Tf="react-flow__aria-live",zf=e=>e.ariaLiveMessage;function Df({rfId:e}){let t=Z(zf);return p.default.createElement("div",{id:`${Tf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:kf},t)}function $f({rfId:e,disableKeyboardA11y:t}){return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{id:`${ua}-${e}`,style:_s},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),p.default.createElement("div",{id:`${fa}-${e}`,style:_s},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&p.default.createElement(Df,{rfId:e}))}var $t=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,o]=(0,p.useState)(!1),r=(0,p.useRef)(!1),i=(0,p.useRef)(new Set([])),[s,a]=(0,p.useMemo)(()=>{if(e!==null){let u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),l=u.reduce((f,d)=>f.concat(...d),[]);return[u,l]}return[[],[]]},[e]);return(0,p.useEffect)(()=>{let c=typeof document<"u"?document:null,u=t?.target||c;if(e!==null){let l=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Ho(h))return!1;let y=Cs(h.code,a);i.current.add(h[y]),Ns(s,i.current,!1)&&(h.preventDefault(),o(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Ho(h))return!1;let y=Cs(h.code,a);Ns(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(h[y]),h.key==="Meta"&&i.current.clear(),r.current=!1},d=()=>{i.current.clear(),o(!1)};return u?.addEventListener("keydown",l),u?.addEventListener("keyup",f),window.addEventListener("blur",d),()=>{u?.removeEventListener("keydown",l),u?.removeEventListener("keyup",f),window.removeEventListener("blur",d)}}},[e,o]),n};function Ns(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Cs(e,t){return t.includes(e)?"code":"key"}function da(e,t,n,o){if(!e.parentNode)return n;let r=t.get(e.parentNode),i=Ze(r,o);return da(r,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(r[ie]?.z??0)>(n.z??0)?r[ie]?.z??0:n.z??0},o)}function ha(e,t,n){e.forEach(o=>{if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||n?.[o.id]){let{x:r,y:i,z:s}=da(o,e,{...o.position,z:o[ie]?.z??0},t);o.positionAbsolute={x:r,y:i},o[ie].z=s,n?.[o.id]&&(o[ie].isParent=!0)}})}function Do(e,t,n,o){let r=new Map,i={},s=o?1e3:0;return e.forEach(a=>{let c=(Ae(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={width:u?.width,height:u?.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(l.parentNode=a.parentNode,i[a.parentNode]=!0),Object.defineProperty(l,ie,{enumerable:!1,value:{handleBounds:u?.[ie]?.handleBounds,z:c}}),r.set(a.id,l)}),ha(r,n,i),r}function pa(e,t={}){let{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:f}=e(),d=t.initial&&!u&&l;if(a&&c&&(d||!t.initial)){let x=n().filter(v=>{let g=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return t.nodes?.length?g&&t.nodes.some(S=>S.id===v.id):g}),y=x.every(v=>v.width&&v.height);if(x.length>0&&y){let v=We(x,f),{x:g,y:S,zoom:C}=ro(v,o,r,t.minZoom??i,t.maxZoom??s,t.padding??.1),w=Ee.translate(g,S).scale(C);return typeof t.duration=="number"&&t.duration>0?a.transform(yt(c,t.duration),w):a.transform(c,w),!0}}return!1}function Pf(e,t){return e.forEach(n=>{let o=t.get(n.id);o&&t.set(o.id,{...o,[ie]:o[ie],selected:n.selected})}),new Map(t)}function Of(e,t){return t.map(n=>{let o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Kn({changedNodes:e,changedEdges:t,get:n,set:o}){let{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e?.length&&(c&&o({nodeInternals:Pf(e,r)}),s?.(e)),t?.length&&(u&&o({edges:Of(t,i)}),a?.(t))}var Mt=()=>{},Rf={zoomIn:Mt,zoomOut:Mt,zoomTo:Mt,getZoom:()=>1,setViewport:Mt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mt,fitBounds:Mt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Hf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Bf=()=>{let e=oe(),{d3Zoom:t,d3Selection:n}=Z(Hf,ne);return(0,p.useMemo)(()=>n&&t?{zoomIn:r=>t.scaleBy(yt(n,r?.duration),1.2),zoomOut:r=>t.scaleBy(yt(n,r?.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(yt(n,i?.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{let[s,a,c]=e.getState().transform,u=Ee.translate(r.x??s,r.y??a).scale(r.zoom??c);t.transform(yt(n,i?.duration),u)},getViewport:()=>{let[r,i,s]=e.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>pa(e.getState,r),setCenter:(r,i,s)=>{let{width:a,height:c,maxZoom:u}=e.getState(),l=typeof s?.zoom<"u"?s.zoom:u,f=a/2-r*l,d=c/2-i*l,h=Ee.translate(f,d).scale(l);t.transform(yt(n,s?.duration),h)},fitBounds:(r,i)=>{let{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:f,zoom:d}=ro(r,s,a,c,u,i?.padding??.1),h=Ee.translate(l,f).scale(d);t.transform(yt(n,i?.duration),h)},project:r=>{let{transform:i,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Vo(r,i,s,a)},screenToFlowPosition:r=>{let{transform:i,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return r;let{x:u,y:l}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-l};return Vo(f,i,s,a)},flowToScreenPosition:r=>{let{transform:i,domNode:s}=e.getState();if(!s)return r;let{x:a,y:c}=s.getBoundingClientRect(),u=Js(r,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:Rf,[t,n])};function mn(){let e=Bf(),t=oe(),n=(0,p.useCallback)(()=>t.getState().getNodes().map(y=>({...y})),[]),o=(0,p.useCallback)(y=>t.getState().nodeInternals.get(y),[]),r=(0,p.useCallback)(()=>{let{edges:y=[]}=t.getState();return y.map(v=>({...v}))},[]),i=(0,p.useCallback)(y=>{let{edges:v=[]}=t.getState();return v.find(g=>g.id===y)},[]),s=(0,p.useCallback)(y=>{let{getNodes:v,setNodes:g,hasDefaultNodes:S,onNodesChange:C}=t.getState(),w=v(),M=typeof y=="function"?y(w):y;if(S)g(M);else if(C){let I=M.length===0?w.map($=>({type:"remove",id:$.id})):M.map($=>({item:$,type:"reset"}));C(I)}},[]),a=(0,p.useCallback)(y=>{let{edges:v=[],setEdges:g,hasDefaultEdges:S,onEdgesChange:C}=t.getState(),w=typeof y=="function"?y(v):y;if(S)g(w);else if(C){let M=w.length===0?v.map(I=>({type:"remove",id:I.id})):w.map(I=>({item:I,type:"reset"}));C(M)}},[]),c=(0,p.useCallback)(y=>{let v=Array.isArray(y)?y:[y],{getNodes:g,setNodes:S,hasDefaultNodes:C,onNodesChange:w}=t.getState();if(C){let I=[...g(),...v];S(I)}else if(w){let M=v.map(I=>({item:I,type:"add"}));w(M)}},[]),u=(0,p.useCallback)(y=>{let v=Array.isArray(y)?y:[y],{edges:g=[],setEdges:S,hasDefaultEdges:C,onEdgesChange:w}=t.getState();if(C)S([...g,...v]);else if(w){let M=v.map(I=>({item:I,type:"add"}));w(M)}},[]),l=(0,p.useCallback)(()=>{let{getNodes:y,edges:v=[],transform:g}=t.getState(),[S,C,w]=g;return{nodes:y().map(M=>({...M})),edges:v.map(M=>({...M})),viewport:{x:S,y:C,zoom:w}}},[]),f=(0,p.useCallback)(({nodes:y,edges:v})=>{let{nodeInternals:g,getNodes:S,edges:C,hasDefaultNodes:w,hasDefaultEdges:M,onNodesDelete:I,onEdgesDelete:$,onNodesChange:z,onEdgesChange:P}=t.getState(),R=(y||[]).map(N=>N.id),O=(v||[]).map(N=>N.id),H=S().reduce((N,E)=>{let k=!R.includes(E.id)&&E.parentNode&&N.find(b=>b.id===E.parentNode);return(typeof E.deletable=="boolean"?E.deletable:!0)&&(R.includes(E.id)||k)&&N.push(E),N},[]),_=C.filter(N=>typeof N.deletable=="boolean"?N.deletable:!0),m=_.filter(N=>O.includes(N.id));if(H||m){let N=jo(H,_),E=[...m,...N],k=E.reduce((D,b)=>(D.includes(b.id)||D.push(b.id),D),[]);if((M||w)&&(M&&t.setState({edges:C.filter(D=>!k.includes(D.id))}),w&&(H.forEach(D=>{g.delete(D.id)}),t.setState({nodeInternals:new Map(g)}))),k.length>0&&($?.(E),P&&P(k.map(D=>({id:D,type:"remove"})))),H.length>0&&(I?.(H),z)){let D=H.map(b=>({id:b.id,type:"remove"}));z(D)}}},[]),d=(0,p.useCallback)(y=>{let v=rf(y),g=v?null:t.getState().nodeInternals.get(y.id);return!v&&!g?[null,null,v]:[v?y:ys(g),g,v]},[]),h=(0,p.useCallback)((y,v=!0,g)=>{let[S,C,w]=d(y);return S?(g||t.getState().getNodes()).filter(M=>{if(!w&&(M.id===C.id||!M.positionAbsolute))return!1;let I=ys(M),$=Ro(I,S);return v&&$>0||$>=S.width*S.height}):[]},[]),x=(0,p.useCallback)((y,v,g=!0)=>{let[S]=d(y);if(!S)return!1;let C=Ro(S,v);return g&&C>0||C>=S.width*S.height},[]);return(0,p.useMemo)(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:x}),[e,n,o,r,i,s,a,c,u,l,f,h,x])}var Vf={actInsideInputWithModifier:!1},Lf=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=oe(),{deleteElements:o}=mn(),r=$t(e,Vf),i=$t(t);(0,p.useEffect)(()=>{if(r){let{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),(0,p.useEffect)(()=>{n.setState({multiSelectionActive:i})},[i])};function Ff(e){let t=oe();(0,p.useEffect)(()=>{let n,o=()=>{if(!e.current)return;let r=Uo(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Ie.error004()),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}var nr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Xf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Gn=e=>({x:e.x,y:e.y,zoom:e.k}),At=(e,t)=>e.target.closest(`.${t}`),Ms=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),As=e=>{let t=e.ctrlKey&&Jn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Yf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Uf=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=ot.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:f=!0,defaultViewport:d,translateExtent:h,minZoom:x,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:g=!0,children:S,noWheelClassName:C,noPanClassName:w})=>{let M=(0,p.useRef)(),I=oe(),$=(0,p.useRef)(!1),z=(0,p.useRef)(!1),P=(0,p.useRef)(null),R=(0,p.useRef)({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:H,d3ZoomHandler:_,userSelectionActive:m}=Z(Yf,ne),N=$t(v),E=(0,p.useRef)(0),k=(0,p.useRef)(!1),D=(0,p.useRef)();return Ff(P),(0,p.useEffect)(()=>{if(P.current){let b=P.current.getBoundingClientRect(),A=an().scaleExtent([x,y]).translateExtent(h),T=ue(P.current).call(A),B=Ee.translate(d.x,d.y).scale(Ve(d.zoom,x,y)),X=[[0,0],[b.width,b.height]],V=A.constrain()(B,X,h);A.transform(T,V),A.wheelDelta(As),I.setState({d3Zoom:A,d3Selection:T,d3ZoomHandler:T.on("wheel.zoom"),transform:[V.x,V.y,V.k],domNode:P.current.closest(".react-flow")})}},[]),(0,p.useEffect)(()=>{H&&O&&(s&&!N&&!m?H.on("wheel.zoom",b=>{if(At(b,C))return!1;b.preventDefault(),b.stopImmediatePropagation();let A=H.property("__zoom").k||1,T=Jn();if(b.ctrlKey&&i&&T){let K=ye(b),G=As(b),j=A*Math.pow(2,G);O.scaleTo(H,j,K,b);return}let B=b.deltaMode===1?20:1,X=c===ot.Vertical?0:b.deltaX*B,V=c===ot.Horizontal?0:b.deltaY*B;!T&&b.shiftKey&&c!==ot.Vertical&&(X=b.deltaY*B,V=0),O.translateBy(H,-(X/A)*a,-(V/A)*a,{internal:!0});let Y=Gn(H.property("__zoom")),{onViewportChangeStart:U,onViewportChange:q,onViewportChangeEnd:Q}=I.getState();clearTimeout(D.current),k.current||(k.current=!0,t?.(b,Y),U?.(Y)),k.current&&(e?.(b,Y),q?.(Y),D.current=setTimeout(()=>{n?.(b,Y),Q?.(Y),k.current=!1},150))},{passive:!1}):typeof _<"u"&&H.on("wheel.zoom",function(b,A){if(!g||At(b,C))return null;b.preventDefault(),_.call(this,b,A)},{passive:!1}))},[m,s,c,H,O,_,N,i,g,C,t,e,n]),(0,p.useEffect)(()=>{O&&O.on("start",b=>{if(!b.sourceEvent||b.sourceEvent.internal)return null;E.current=b.sourceEvent?.button;let{onViewportChangeStart:A}=I.getState(),T=Gn(b.transform);$.current=!0,R.current=T,b.sourceEvent?.type==="mousedown"&&I.setState({paneDragging:!0}),A?.(T),t?.(b.sourceEvent,T)})},[O,t]),(0,p.useEffect)(()=>{O&&(m&&!$.current?O.on("zoom",null):m||O.on("zoom",b=>{let{onViewportChange:A}=I.getState();if(I.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),z.current=!!(o&&Ms(f,E.current??0)),(e||A)&&!b.sourceEvent?.internal){let T=Gn(b.transform);A?.(T),e?.(b.sourceEvent,T)}}))},[m,O,e,f,o]),(0,p.useEffect)(()=>{O&&O.on("end",b=>{if(!b.sourceEvent||b.sourceEvent.internal)return null;let{onViewportChangeEnd:A}=I.getState();if($.current=!1,I.setState({paneDragging:!1}),o&&Ms(f,E.current??0)&&!z.current&&o(b.sourceEvent),z.current=!1,(n||A)&&Xf(R.current,b.transform)){let T=Gn(b.transform);R.current=T,clearTimeout(M.current),M.current=setTimeout(()=>{A?.(T),n?.(b.sourceEvent,T)},s?150:0)}})},[O,s,f,n,o]),(0,p.useEffect)(()=>{O&&O.filter(b=>{let A=N||r,T=i&&b.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&b.button===1&&b.type==="mousedown"&&(At(b,"react-flow__node")||At(b,"react-flow__edge")))return!0;if(!f&&!A&&!s&&!u&&!i||m||!u&&b.type==="dblclick"||At(b,C)&&b.type==="wheel"||At(b,w)&&(b.type!=="wheel"||s&&b.type==="wheel"&&!N)||!i&&b.ctrlKey&&b.type==="wheel"||!A&&!s&&!T&&b.type==="wheel"||!f&&(b.type==="mousedown"||b.type==="touchstart")||Array.isArray(f)&&!f.includes(b.button)&&(b.type==="mousedown"||b.type==="touchstart"))return!1;let B=Array.isArray(f)&&f.includes(b.button)||!b.button||b.button<=1;return(!b.ctrlKey||b.type==="wheel")&&B})},[m,O,r,i,s,u,f,l,N]),p.default.createElement("div",{className:"react-flow__renderer",ref:P,style:nr},S)},Zf=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Wf(){let{userSelectionActive:e,userSelectionRect:t}=Z(Zf,ne);return e&&t?p.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Fo(e,t){let n=e.find(o=>o.id===t.parentNode);if(n){let o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),t.position.x<0){let i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){let i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function ma(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);let n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{let i=e.filter(a=>a.id===r.id);if(i.length===0)return o.push(r),o;let s={...r};for(let a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&Fo(o,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&Fo(o,s);break}case"remove":return o}return o.push(s),o},n)}function or(e,t){return ma(e,t)}function ga(e,t){return ma(e,t)}var nt=(e,t)=>({id:e,type:"select",selected:t});function kt(e,t){return e.reduce((n,o)=>{let r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(nt(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(nt(o.id,!1))),n},[])}var $o=(e,t)=>n=>{n.target===t.current&&e?.(n)},qf=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ya=(0,p.memo)(({isSelecting:e,selectionMode:t=Dt.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:f})=>{let d=(0,p.useRef)(null),h=oe(),x=(0,p.useRef)(0),y=(0,p.useRef)(0),v=(0,p.useRef)(),{userSelectionActive:g,elementsSelectable:S,dragging:C}=Z(qf,ne),w=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,y.current=0},M=_=>{i?.(_),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},I=_=>{if(Array.isArray(n)&&n?.includes(2)){_.preventDefault();return}s?.(_)},$=a?_=>a(_):void 0,z=_=>{let{resetSelectedElements:m,domNode:N}=h.getState();if(v.current=N?.getBoundingClientRect(),!S||!e||_.button!==0||_.target!==d.current||!v.current)return;let{x:E,y:k}=rt(_,v.current);m(),h.setState({userSelectionRect:{width:0,height:0,startX:E,startY:k,x:E,y:k}}),o?.(_)},P=_=>{let{userSelectionRect:m,nodeInternals:N,edges:E,transform:k,onNodesChange:D,onEdgesChange:b,nodeOrigin:A,getNodes:T}=h.getState();if(!e||!v.current||!m)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});let B=rt(_,v.current),X=m.startX??0,V=m.startY??0,Y={...m,x:B.x<X?B.x:X,y:B.y<V?B.y:V,width:Math.abs(B.x-X),height:Math.abs(B.y-V)},U=T(),q=js(N,Y,k,t===Dt.Partial,!0,A),Q=jo(q,E).map(G=>G.id),K=q.map(G=>G.id);if(x.current!==K.length){x.current=K.length;let G=kt(U,K);G.length&&D?.(G)}if(y.current!==Q.length){y.current=Q.length;let G=kt(E,Q);G.length&&b?.(G)}h.setState({userSelectionRect:Y})},R=_=>{if(_.button!==0)return;let{userSelectionRect:m}=h.getState();!g&&m&&_.target===d.current&&M?.(_),h.setState({nodesSelectionActive:x.current>0}),w(),r?.(_)},O=_=>{g&&(h.setState({nodesSelectionActive:x.current>0}),r?.(_)),w()},H=S&&(e||g);return p.default.createElement("div",{className:re(["react-flow__pane",{dragging:C,selection:e}]),onClick:H?void 0:$o(M,d),onContextMenu:$o(I,d),onWheel:$o($,d),onMouseEnter:H?void 0:c,onMouseDown:H?z:void 0,onMouseMove:H?P:u,onMouseUp:H?R:void 0,onMouseLeave:H?O:l,ref:d,style:nr},f,p.default.createElement(Wf,null))});ya.displayName="Pane";function xa(e,t){if(!e.parentNode)return!1;let n=t.get(e.parentNode);return n?n.selected?!0:xa(n,t):!1}function Is(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Kf(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||!xa(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height,expandParent:r.expandParent}))}function Gf(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function wa(e,t,n,o,r=[0,0],i){let s=Gf(e,e.extent||o),a=s;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){let l=n.get(e.parentNode),{x:f,y:d}=Ze(l,r).positionAbsolute;a=l&&Ae(f)&&Ae(d)&&Ae(l.width)&&Ae(l.height)?[[f+e.width*r[0],d+e.height*r[1]],[f+l.width-e.width+e.width*r[0],d+l.height-e.height+e.height*r[1]]]:a}else i?.("005",Ie.error005()),a=s;else if(e.extent&&e.parentNode&&e.extent!=="parent"){let l=n.get(e.parentNode),{x:f,y:d}=Ze(l,r).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+d],[e.extent[1][0]+f,e.extent[1][1]+d]]}let c={x:0,y:0};if(e.parentNode){let l=n.get(e.parentNode);c=Ze(l,r).positionAbsolute}let u=a&&a!=="parent"?Zo(t,a):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function Po({nodeId:e,dragItems:t,nodeInternals:n}){let o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}var ks=(e,t,n,o)=>{let r=t.querySelectorAll(e);if(!r||!r.length)return null;let i=Array.from(r),s=t.getBoundingClientRect(),a={x:s.width*o[0],y:s.height*o[1]};return i.map(c=>{let u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Uo(c)}})};function ln(e,t,n){return n===void 0?n:o=>{let r=t().nodeInternals.get(e);r&&n(o,{...r})}}function Xo({id:e,store:t,unselect:n=!1,nodeRef:o}){let{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c?.("012",Ie.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])}function io(){let e=oe();return(0,p.useCallback)(({sourceEvent:n})=>{let{transform:o,snapGrid:r,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Oo(e){return(t,n,o)=>e?.(t,o)}function va({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){let a=oe(),[c,u]=(0,p.useState)(!1),l=(0,p.useRef)([]),f=(0,p.useRef)({x:null,y:null}),d=(0,p.useRef)(0),h=(0,p.useRef)(null),x=(0,p.useRef)({x:0,y:0}),y=(0,p.useRef)(null),v=(0,p.useRef)(!1),g=(0,p.useRef)(!1),S=io();return(0,p.useEffect)(()=>{if(e?.current){let C=ue(e.current),w=({x:$,y:z})=>{let{nodeInternals:P,onNodeDrag:R,onSelectionDrag:O,updateNodePositions:H,nodeExtent:_,snapGrid:m,snapToGrid:N,nodeOrigin:E,onError:k}=a.getState();f.current={x:$,y:z};let D=!1,b={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&_){let T=We(l.current,E);b=zt(T)}if(l.current=l.current.map(T=>{let B={x:$-T.distance.x,y:z-T.distance.y};N&&(B.x=m[0]*Math.round(B.x/m[0]),B.y=m[1]*Math.round(B.y/m[1]));let X=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];l.current.length>1&&_&&!T.extent&&(X[0][0]=T.positionAbsolute.x-b.x+_[0][0],X[1][0]=T.positionAbsolute.x+(T.width??0)-b.x2+_[1][0],X[0][1]=T.positionAbsolute.y-b.y+_[0][1],X[1][1]=T.positionAbsolute.y+(T.height??0)-b.y2+_[1][1]);let V=wa(T,B,P,X,E,k);return D=D||T.position.x!==V.position.x||T.position.y!==V.position.y,T.position=V.position,T.positionAbsolute=V.positionAbsolute,T}),!D)return;H(l.current,!0,!0),u(!0);let A=r?R:Oo(O);if(A&&y.current){let[T,B]=Po({nodeId:r,dragItems:l.current,nodeInternals:P});A(y.current,T,B)}},M=()=>{if(!h.current)return;let[$,z]=Ls(x.current,h.current);if($!==0||z!==0){let{transform:P,panBy:R}=a.getState();f.current.x=(f.current.x??0)-$/P[2],f.current.y=(f.current.y??0)-z/P[2],R({x:$,y:z})&&w(f.current)}d.current=requestAnimationFrame(M)},I=$=>{let{nodeInternals:z,multiSelectionActive:P,nodesDraggable:R,unselectNodesAndEdges:O,onNodeDragStart:H,onSelectionDragStart:_}=a.getState();g.current=!0;let m=r?H:Oo(_);(!s||!i)&&!P&&r&&(z.get(r)?.selected||O()),r&&i&&s&&Xo({id:r,store:a,nodeRef:e});let N=S($);if(f.current=N,l.current=Kf(z,R,N,r),m&&l.current){let[E,k]=Po({nodeId:r,dragItems:l.current,nodeInternals:z});m($.sourceEvent,E,k)}};if(t)C.on(".drag",null);else{let $=Wt().on("start",z=>{let{domNode:P,nodeDragThreshold:R}=a.getState();R===0&&I(z);let O=S(z);f.current=O,h.current=P?.getBoundingClientRect()||null,x.current=rt(z.sourceEvent,h.current)}).on("drag",z=>{let P=S(z),{autoPanOnNodeDrag:R,nodeDragThreshold:O}=a.getState();if(!v.current&&g.current&&R&&(v.current=!0,M()),!g.current){let H=P.xSnapped-(f?.current?.x??0),_=P.ySnapped-(f?.current?.y??0);Math.sqrt(H*H+_*_)>O&&I(z)}(f.current.x!==P.xSnapped||f.current.y!==P.ySnapped)&&l.current&&g.current&&(y.current=z.sourceEvent,x.current=rt(z.sourceEvent,h.current),w(P))}).on("end",z=>{if(g.current&&(u(!1),v.current=!1,g.current=!1,cancelAnimationFrame(d.current),l.current)){let{updateNodePositions:P,nodeInternals:R,onNodeDragStop:O,onSelectionDragStop:H}=a.getState(),_=r?O:Oo(H);if(P(l.current,!1,!1),_){let[m,N]=Po({nodeId:r,dragItems:l.current,nodeInternals:R});_(z.sourceEvent,m,N)}}}).filter(z=>{let P=z.target;return!z.button&&(!n||!Is(P,`.${n}`,e))&&(!o||Is(P,o,e))});return C.call($),()=>{C.on(".drag",null)}}}},[e,t,n,o,i,a,r,s,S]),c}function ba(){let e=oe();return(0,p.useCallback)(n=>{let{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),f=s().filter(S=>S.selected&&(S.draggable||l&&typeof S.draggable>"u")),d=a?c[0]:5,h=a?c[1]:5,x=n.isShiftPressed?4:1,y=n.x*d*x,v=n.y*h*x,g=f.map(S=>{if(S.positionAbsolute){let C={x:S.positionAbsolute.x+y,y:S.positionAbsolute.y+v};a&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));let{positionAbsolute:w,position:M}=wa(S,C,o,r,void 0,u);S.position=M,S.positionAbsolute=w}return S});i(g,!0,!1)},[])}var Tt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},un=e=>{let t=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:f,onMouseMove:d,onMouseLeave:h,onContextMenu:x,onDoubleClick:y,style:v,className:g,isDraggable:S,isSelectable:C,isConnectable:w,isFocusable:M,selectNodesOnDrag:I,sourcePosition:$,targetPosition:z,hidden:P,resizeObserver:R,dragHandle:O,zIndex:H,isParent:_,noDragClassName:m,noPanClassName:N,initialized:E,disableKeyboardA11y:k,ariaLabel:D,rfId:b})=>{let A=oe(),T=(0,p.useRef)(null),B=(0,p.useRef)($),X=(0,p.useRef)(z),V=(0,p.useRef)(o),Y=C||S||l||f||d||h,U=ba(),q=ln(n,A.getState,f),Q=ln(n,A.getState,d),K=ln(n,A.getState,h),G=ln(n,A.getState,x),j=ln(n,A.getState,y),ce=ee=>{let{nodeDragThreshold:le}=A.getState();if(C&&(!I||!S||le>0)&&Xo({id:n,store:A,nodeRef:T}),l){let fe=A.getState().nodeInternals.get(n);fe&&l(ee,{...fe})}},pe=ee=>{if(!Ho(ee))if(Ys.includes(ee.key)&&C){let le=ee.key==="Escape";Xo({id:n,store:A,unselect:le,nodeRef:T})}else!k&&S&&u&&Object.prototype.hasOwnProperty.call(Tt,ee.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),U({x:Tt[ee.key].x,y:Tt[ee.key].y,isShiftPressed:ee.shiftKey}))};(0,p.useEffect)(()=>{if(T.current&&!P){let ee=T.current;return R?.observe(ee),()=>R?.unobserve(ee)}},[P]),(0,p.useEffect)(()=>{let ee=V.current!==o,le=B.current!==$,fe=X.current!==z;T.current&&(ee||le||fe)&&(ee&&(V.current=o),le&&(B.current=$),fe&&(X.current=z),A.getState().updateNodeDimensions([{id:n,nodeElement:T.current,forceUpdate:!0}]))},[n,o,$,z]);let te=va({nodeRef:T,disabled:P||!S,noDragClassName:m,handleSelector:O,nodeId:n,isSelectable:C,selectNodesOnDrag:I});return P?null:p.default.createElement("div",{className:re(["react-flow__node",`react-flow__node-${o}`,{[N]:S},g,{selected:u,selectable:C,parent:_,dragging:te}]),ref:T,style:{zIndex:H,transform:`translate(${a}px,${c}px)`,pointerEvents:Y?"all":"none",visibility:E?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:q,onMouseMove:Q,onMouseLeave:K,onContextMenu:G,onClick:ce,onDoubleClick:j,onKeyDown:M?pe:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":k?void 0:`${ua}-${b}`,"aria-label":D},p.default.createElement(ff,{value:n},p.default.createElement(e,{id:n,data:r,type:o,xPos:i,yPos:s,selected:u,isConnectable:w,sourcePosition:$,targetPosition:z,dragging:te,dragHandle:O,zIndex:H})))};return t.displayName="NodeWrapper",(0,p.memo)(t)},Qf=e=>{let t=e.getNodes().filter(n=>n.selected);return{...We(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Jf({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let o=oe(),{width:r,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=Z(Qf,ne),l=ba(),f=(0,p.useRef)(null);if((0,p.useEffect)(()=>{n||f.current?.focus({preventScroll:!0})},[n]),va({nodeRef:f}),u||!r||!i)return null;let d=e?x=>{let y=o.getState().getNodes().filter(v=>v.selected);e(x,y)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(Tt,x.key)&&l({x:Tt[x.key].x,y:Tt[x.key].y,isShiftPressed:x.shiftKey})};return p.default.createElement("div",{className:re(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},p.default.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:i,top:a,left:s}}))}var jf=(0,p.memo)(Jf),ed=e=>e.nodesSelectionActive,Ea=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:f,selectionOnDrag:d,selectionMode:h,onSelectionStart:x,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:g,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:w,zoomOnPinch:M,panOnScroll:I,panOnScrollSpeed:$,panOnScrollMode:z,zoomOnDoubleClick:P,panOnDrag:R,defaultViewport:O,translateExtent:H,minZoom:_,maxZoom:m,preventScrolling:N,onSelectionContextMenu:E,noWheelClassName:k,noPanClassName:D,disableKeyboardA11y:b})=>{let A=Z(ed),T=$t(f),B=$t(g),X=B||R,V=B||I,Y=T||d&&X!==!0;return Lf({deleteKeyCode:a,multiSelectionKeyCode:v}),p.default.createElement(Uf,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:C,zoomOnScroll:w,zoomOnPinch:M,panOnScroll:V,panOnScrollSpeed:$,panOnScrollMode:z,zoomOnDoubleClick:P,panOnDrag:!T&&X,defaultViewport:O,translateExtent:H,minZoom:_,maxZoom:m,zoomActivationKeyCode:S,preventScrolling:N,noWheelClassName:k,noPanClassName:D},p.default.createElement(ya,{onSelectionStart:x,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:X,isSelecting:!!Y,selectionMode:h},e,A&&p.default.createElement(jf,{onSelectionContextMenu:E,noPanClassName:D,disableKeyboardA11y:b})))};Ea.displayName="FlowRenderer";var td=(0,p.memo)(Ea);function nd(e){return Z((0,p.useCallback)(n=>e?js(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function od(e){let t={input:un(e.input||sa),default:un(e.default||Lo),output:un(e.output||ca),group:un(e.group||tr)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=un(e[i]||Lo),r),n);return{...t,...o}}var rd=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},id=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Sa=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=Z(id,ne),a=nd(e.onlyRenderVisibleElements),c=(0,p.useRef)(),u=(0,p.useMemo)(()=>{if(typeof ResizeObserver>"u")return null;let l=new ResizeObserver(f=>{let d=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(d)});return c.current=l,l},[]);return(0,p.useEffect)(()=>()=>{c?.current?.disconnect()},[]),p.default.createElement("div",{className:"react-flow__nodes",style:nr},a.map(l=>{let f=l.type||"default";e.nodeTypes[f]||(s?.("003",Ie.error003(f)),f="default");let d=e.nodeTypes[f]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),x=!!(l.selectable||r&&typeof l.selectable>"u"),y=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||o&&typeof l.focusable>"u"),g=e.nodeExtent?Zo(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,S=g?.x??0,C=g?.y??0,w=rd({x:S,y:C,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return p.default.createElement(d,{key:l.id,id:l.id,className:l.className,style:l.style,type:f,data:l.data,sourcePosition:l.sourcePosition||F.Bottom,targetPosition:l.targetPosition||F.Top,hidden:l.hidden,xPos:S,yPos:C,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:x,isConnectable:y,isFocusable:v,resizeObserver:u,dragHandle:l.dragHandle,zIndex:l[ie]?.z??0,isParent:!!l[ie]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel})}))};Sa.displayName="NodeRenderer";var sd=(0,p.memo)(Sa),ad=(e,t,n)=>n===F.Left?e-t:n===F.Right?e+t:e,cd=(e,t,n)=>n===F.Top?e-t:n===F.Bottom?e+t:e,Ts="react-flow__edgeupdater",zs=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a})=>p.default.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:re([Ts,`${Ts}-${a}`]),cx:ad(t,o,e),cy:cd(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),ld=()=>!0,It=e=>{let t=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:v,source:g,target:S,sourceX:C,sourceY:w,targetX:M,targetY:I,sourcePosition:$,targetPosition:z,elementsSelectable:P,hidden:R,sourceHandleId:O,targetHandleId:H,onContextMenu:_,onMouseEnter:m,onMouseMove:N,onMouseLeave:E,edgeUpdaterRadius:k,onEdgeUpdate:D,onEdgeUpdateStart:b,onEdgeUpdateEnd:A,markerEnd:T,markerStart:B,rfId:X,ariaLabel:V,isFocusable:Y,isUpdatable:U,pathOptions:q,interactionWidth:Q})=>{let K=(0,p.useRef)(null),[G,j]=(0,p.useState)(!1),[ce,pe]=(0,p.useState)(!1),te=oe(),ee=(0,p.useMemo)(()=>`url(#${Bo(B,X)})`,[B,X]),le=(0,p.useMemo)(()=>`url(#${Bo(T,X)})`,[T,X]);if(R)return null;let fe=ge=>{let{edges:Ce,addSelectedEdges:st,unselectNodesAndEdges:at,multiSelectionActive:wt}=te.getState(),He=Ce.find(ct=>ct.id===n);He&&(P&&(te.setState({nodesSelectionActive:!1}),He.selected&&wt?(at({nodes:[],edges:[He]}),K.current?.blur()):st([n])),s&&s(ge,He))},L=cn(n,te.getState,a),se=cn(n,te.getState,_),_e=cn(n,te.getState,m),qe=cn(n,te.getState,N),Ke=cn(n,te.getState,E),Pe=(ge,Ce)=>{if(ge.button!==0)return;let{edges:st,isValidConnection:at}=te.getState(),wt=Ce?S:g,He=(Ce?H:O)||null,ct=Ce?"target":"source",so=at||ld,ao=Ce,Bt=st.find(lt=>lt.id===n);pe(!0),b?.(ge,Bt,ct);let co=lt=>{pe(!1),A?.(lt,Bt,ct)};na({event:ge,handleId:He,nodeId:wt,onConnect:lt=>D?.(Bt,lt),isTarget:ao,getState:te.getState,setState:te.setState,isValidConnection:so,edgeUpdaterType:ct,onEdgeUpdateEnd:co})},Le=ge=>Pe(ge,!0),we=ge=>Pe(ge,!1),ve=()=>j(!0),Ne=()=>j(!1),Oe=!P&&!s,Re=ge=>{if(Ys.includes(ge.key)&&P){let{unselectNodesAndEdges:Ce,addSelectedEdges:st,edges:at}=te.getState();ge.key==="Escape"?(K.current?.blur(),Ce({edges:[at.find(He=>He.id===n)]})):st([n])}};return p.default.createElement("g",{className:re(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:Oe,updating:G}]),onClick:fe,onDoubleClick:L,onContextMenu:se,onMouseEnter:_e,onMouseMove:qe,onMouseLeave:Ke,onKeyDown:Y?Re:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":V===null?void 0:V||`Edge from ${g} to ${S}`,"aria-describedby":Y?`${fa}-${X}`:void 0,ref:K},!ce&&p.default.createElement(e,{id:n,source:g,target:S,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,data:i,style:v,sourceX:C,sourceY:w,targetX:M,targetY:I,sourcePosition:$,targetPosition:z,sourceHandleId:O,targetHandleId:H,markerStart:ee,markerEnd:le,pathOptions:q,interactionWidth:Q}),U&&p.default.createElement(p.default.Fragment,null,(U==="source"||U===!0)&&p.default.createElement(zs,{position:$,centerX:C,centerY:w,radius:k,onMouseDown:Le,onMouseEnter:ve,onMouseOut:Ne,type:"source"}),(U==="target"||U===!0)&&p.default.createElement(zs,{position:z,centerX:M,centerY:I,radius:k,onMouseDown:we,onMouseEnter:ve,onMouseOut:Ne,type:"target"})))};return t.displayName="EdgeWrapper",(0,p.memo)(t)};function ud(e){let t={default:It(e.default||dn),straight:It(e.bezier||oo),step:It(e.step||no),smoothstep:It(e.step||pn),simplebezier:It(e.simplebezier||to)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=It(e[i]||dn),r),n);return{...t,...o}}function Ds(e,t,n=null){let o=(n?.x||0)+t.x,r=(n?.y||0)+t.y,i=n?.width||t.width,s=n?.height||t.height;switch(e){case F.Top:return{x:o+i/2,y:r};case F.Right:return{x:o+i,y:r+s/2};case F.Bottom:return{x:o+i/2,y:r+s};case F.Left:return{x:o,y:r+s/2}}}function $s(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}var fd=(e,t,n,o,r,i)=>{let s=Ds(n,e,t),a=Ds(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function dd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,transform:c}){let u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);let l=zt({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),f=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),d=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(f*d)>0}function Ps(e){let t=e?.[ie]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var hd=[{level:0,isMaxLevel:!0,edges:[]}];function pd(e,t,n=!1){let o=-1,r=e.reduce((s,a)=>{let c=Ae(a.zIndex),u=c?a.zIndex:0;if(n){let l=t.get(a.target),f=t.get(a.source),d=a.selected||l?.selected||f?.selected,h=Math.max(f?.[ie]?.z||0,l?.[ie]?.z||0,1e3);u=(c?a.zIndex:0)+(d?h:0)}return s[u]?s[u].push(a):s[u]=[a],o=u>o?u:o,s},{}),i=Object.entries(r).map(([s,a])=>{let c=+s;return{edges:a,level:c,isMaxLevel:c===o}});return i.length===0?hd:i}function md(e,t,n){let o=Z((0,p.useCallback)(r=>e?r.edges.filter(i=>{let s=t.get(i.source),a=t.get(i.target);return s?.width&&s?.height&&a?.width&&a?.height&&dd({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return pd(o,t,n)}var gd=({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),yd=({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Os={[fn.Arrow]:gd,[fn.ArrowClosed]:yd};function xd(e){let t=oe();return(0,p.useMemo)(()=>Object.prototype.hasOwnProperty.call(Os,e)?Os[e]:(t.getState().onError?.("009",Ie.error009(e)),null),[e])}var wd=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{let c=xd(t);return c?p.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},p.default.createElement(c,{color:n,strokeWidth:s})):null},vd=({defaultColor:e,rfId:t})=>n=>{let o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){let a=Bo(s,t);o.includes(a)||(r.push({id:a,color:s.color||e,...s}),o.push(a))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},_a=({defaultColor:e,rfId:t})=>{let n=Z((0,p.useCallback)(vd({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return p.default.createElement("defs",null,n.map(o=>p.default.createElement(wd,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};_a.displayName="MarkerDefinitions";var bd=(0,p.memo)(_a),Ed=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Na=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:h,onEdgeUpdateStart:x,onEdgeUpdateEnd:y,children:v})=>{let{edgesFocusable:g,edgesUpdatable:S,elementsSelectable:C,width:w,height:M,connectionMode:I,nodeInternals:$,onError:z}=Z(Ed,ne),P=md(t,$,n);return w?p.default.createElement(p.default.Fragment,null,P.map(({level:R,edges:O,isMaxLevel:H})=>p.default.createElement("svg",{key:R,style:{zIndex:R},width:w,height:M,className:"react-flow__edges react-flow__container"},H&&p.default.createElement(bd,{defaultColor:e,rfId:o}),p.default.createElement("g",null,O.map(_=>{let[m,N,E]=Ps($.get(_.source)),[k,D,b]=Ps($.get(_.target));if(!E||!b)return null;let A=_.type||"default";r[A]||(z?.("011",Ie.error011(A)),A="default");let T=r[A]||r.default,B=I===it.Strict?D.target:(D.target??[]).concat(D.source??[]),X=$s(N.source,_.sourceHandle),V=$s(B,_.targetHandle),Y=X?.position||F.Bottom,U=V?.position||F.Top,q=!!(_.focusable||g&&typeof _.focusable>"u"),Q=typeof s<"u"&&(_.updatable||S&&typeof _.updatable>"u");if(!X||!V)return z?.("008",Ie.error008(X,_)),null;let{sourceX:K,sourceY:G,targetX:j,targetY:ce}=fd(m,X,Y,k,V,U);return p.default.createElement(T,{key:_.id,id:_.id,className:re([_.className,i]),type:A,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:K,sourceY:G,targetX:j,targetY:ce,sourcePosition:Y,targetPosition:U,elementsSelectable:C,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:c,onMouseMove:u,onMouseLeave:l,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:h,onEdgeUpdateStart:x,onEdgeUpdateEnd:y,rfId:o,ariaLabel:_.ariaLabel,isFocusable:q,isUpdatable:Q,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth})})))),v):null};Na.displayName="EdgeRenderer";var Sd=(0,p.memo)(Na),_d=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Nd({children:e}){let t=Z(_d);return p.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Cd(e){let t=mn(),n=(0,p.useRef)(!1);(0,p.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var Md={[F.Left]:F.Right,[F.Right]:F.Left,[F.Top]:F.Bottom,[F.Bottom]:F.Top},Ca=({nodeId:e,handleType:t,style:n,type:o=Ue.Bezier,CustomComponent:r,connectionStatus:i})=>{let{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=Z((0,p.useCallback)(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[e]),ne),f=s?.[ie]?.handleBounds,d=f?.[t];if(l===it.Loose&&(d=d||f?.[t==="source"?"target":"source"]),!s||!d)return null;let h=a?d.find(I=>I.id===a):d[0],x=h?h.x+h.width/2:(s.width??0)/2,y=h?h.y+h.height/2:s.height??0,v=(s.positionAbsolute?.x??0)+x,g=(s.positionAbsolute?.y??0)+y,S=h?.position,C=S?Md[S]:null;if(!S||!C)return null;if(r)return p.default.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:v,fromY:g,toX:c,toY:u,fromPosition:S,toPosition:C,connectionStatus:i});let w="",M={sourceX:v,sourceY:g,sourcePosition:S,targetX:c,targetY:u,targetPosition:C};return o===Ue.Bezier?[w]=Go(M):o===Ue.Step?[w]=jn({...M,borderRadius:0}):o===Ue.SmoothStep?[w]=jn(M):o===Ue.SimpleBezier?[w]=Ko(M):w=`M${v},${g} ${c},${u}`,p.default.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Ca.displayName="ConnectionLine";var Ad=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Id({containerStyle:e,style:t,type:n,component:o}){let{nodeId:r,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=Z(Ad,ne);return!(r&&i&&a&&s)?null:p.default.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},p.default.createElement("g",{className:re(["react-flow__connection",u])},p.default.createElement(Ca,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function Rs(e,t){let n=(0,p.useRef)(null),o=oe();return(0,p.useMemo)(()=>t(e),[e])}var Ma=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:y,onSelectionEnd:v,connectionLineType:g,connectionLineStyle:S,connectionLineComponent:C,connectionLineContainerStyle:w,selectionKeyCode:M,selectionOnDrag:I,selectionMode:$,multiSelectionKeyCode:z,panActivationKeyCode:P,zoomActivationKeyCode:R,deleteKeyCode:O,onlyRenderVisibleElements:H,elementsSelectable:_,selectNodesOnDrag:m,defaultViewport:N,translateExtent:E,minZoom:k,maxZoom:D,preventScrolling:b,defaultMarkerColor:A,zoomOnScroll:T,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:V,panOnScrollMode:Y,zoomOnDoubleClick:U,panOnDrag:q,onPaneClick:Q,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:j,onPaneScroll:ce,onPaneContextMenu:pe,onEdgeUpdate:te,onEdgeContextMenu:ee,onEdgeMouseEnter:le,onEdgeMouseMove:fe,onEdgeMouseLeave:L,edgeUpdaterRadius:se,onEdgeUpdateStart:_e,onEdgeUpdateEnd:qe,noDragClassName:Ke,noWheelClassName:Pe,noPanClassName:Le,elevateEdgesOnSelect:we,disableKeyboardA11y:ve,nodeOrigin:Ne,nodeExtent:Oe,rfId:Re})=>{let ge=Rs(e,od),Ce=Rs(t,ud);return Cd(i),p.default.createElement(td,{onPaneClick:Q,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:j,onPaneContextMenu:pe,onPaneScroll:ce,deleteKeyCode:O,selectionKeyCode:M,selectionOnDrag:I,selectionMode:$,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:z,panActivationKeyCode:P,zoomActivationKeyCode:R,elementsSelectable:_,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:T,zoomOnPinch:B,zoomOnDoubleClick:U,panOnScroll:X,panOnScrollSpeed:V,panOnScrollMode:Y,panOnDrag:q,defaultViewport:N,translateExtent:E,minZoom:k,maxZoom:D,onSelectionContextMenu:x,preventScrolling:b,noDragClassName:Ke,noWheelClassName:Pe,noPanClassName:Le,disableKeyboardA11y:ve},p.default.createElement(Nd,null,p.default.createElement(Sd,{edgeTypes:Ce,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:te,onlyRenderVisibleElements:H,onEdgeContextMenu:ee,onEdgeMouseEnter:le,onEdgeMouseMove:fe,onEdgeMouseLeave:L,onEdgeUpdateStart:_e,onEdgeUpdateEnd:qe,edgeUpdaterRadius:se,defaultMarkerColor:A,noPanClassName:Le,elevateEdgesOnSelect:!!we,disableKeyboardA11y:ve,rfId:Re},p.default.createElement(Id,{style:S,type:g,component:C,containerStyle:w})),p.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),p.default.createElement(sd,{nodeTypes:ge,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,selectNodesOnDrag:m,onlyRenderVisibleElements:H,noPanClassName:Le,noDragClassName:Ke,disableKeyboardA11y:ve,nodeOrigin:Ne,nodeExtent:Oe,rfId:Re})))};Ma.displayName="GraphView";var kd=(0,p.memo)(Ma),Yo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Yo,nodeExtent:Yo,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:it.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Qn,isValidConnection:void 0},Td=()=>Mr((e,t)=>({...tt,setNodes:n=>{let{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:Do(n,o,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{let r=typeof n<"u",i=typeof o<"u",s=r?Do(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{let{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c?.querySelector(".react-flow__viewport");if(!l)return;let f=window.getComputedStyle(l),{m22:d}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((y,v)=>{let g=r.get(v.id);if(g){let S=Uo(v.nodeElement);!!(S.width&&S.height&&(g.width!==S.width||g.height!==S.height||v.forceUpdate))&&(r.set(g.id,{...g,[ie]:{...g[ie],handleBounds:{source:ks(".source",v.nodeElement,d,u),target:ks(".target",v.nodeElement,d,u)}},...S}),y.push({id:g.id,type:"dimensions",dimensions:S}))}return y},[]);ha(r,u);let x=s||i&&!s&&pa(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:x}),h?.length>0&&o?.(h)},updateNodePositions:(n,o=!0,r=!1)=>{let{triggerNodeChanges:i}=t(),s=n.map(a=>{let c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{let{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n?.length){if(i){let u=or(n,a()),l=Do(u,r,s,c);e({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{let{multiSelectionActive:o,edges:r,getNodes:i}=t(),s,a=null;o?s=n.map(c=>nt(c,!0)):(s=kt(i(),n),a=kt(r,[])),Kn({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{let{multiSelectionActive:o,edges:r,getNodes:i}=t(),s,a=null;o?s=n.map(c=>nt(c,!0)):(s=kt(r,n),a=kt(i(),[])),Kn({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{let{edges:r,getNodes:i}=t(),s=n||i(),a=o||r,c=s.map(l=>(l.selected=!1,nt(l.id,!1))),u=a.map(l=>nt(l.id,!1));Kn({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{let{d3Zoom:o,maxZoom:r}=t();o?.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:o,minZoom:r}=t();o?.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:o}=t(),i=o().filter(a=>a.selected).map(a=>nt(a.id,!1)),s=n.filter(a=>a.selected).map(a=>nt(a.id,!1));Kn({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=Zo(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{let{transform:o,width:r,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;let u=Ee.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,i]],f=s?.constrain()(u,l,c);return s.transform(a,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>e({connectionNodeId:tt.connectionNodeId,connectionHandleId:tt.connectionHandleId,connectionHandleType:tt.connectionHandleType,connectionStatus:tt.connectionStatus,connectionStartHandle:tt.connectionStartHandle,connectionEndHandle:tt.connectionEndHandle}),reset:()=>e({...tt})}),Object.is),rr=({children:e})=>{let t=(0,p.useRef)(null);return t.current||(t.current=Td()),p.default.createElement(ef,{value:t.current},e)};rr.displayName="ReactFlowProvider";var Aa=({children:e})=>(0,p.useContext)(eo)?p.default.createElement(p.default.Fragment,null,e):p.default.createElement(rr,null,e);Aa.displayName="ReactFlowWrapper";var zd={input:sa,default:Lo,output:ca,group:tr},Dd={default:dn,straight:oo,step:no,smoothstep:pn,simplebezier:to},$d=[0,0],Pd=[15,15],Od={x:0,y:0,zoom:1},Rd={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ir=(0,p.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=zd,edgeTypes:s=Dd,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:x,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:I,onNodeDragStart:$,onNodeDrag:z,onNodeDragStop:P,onNodesDelete:R,onEdgesDelete:O,onSelectionChange:H,onSelectionDragStart:_,onSelectionDrag:m,onSelectionDragStop:N,onSelectionContextMenu:E,onSelectionStart:k,onSelectionEnd:D,connectionMode:b=it.Strict,connectionLineType:A=Ue.Bezier,connectionLineStyle:T,connectionLineComponent:B,connectionLineContainerStyle:X,deleteKeyCode:V="Backspace",selectionKeyCode:Y="Shift",selectionOnDrag:U=!1,selectionMode:q=Dt.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:K=Jn()?"Meta":"Control",zoomActivationKeyCode:G=Jn()?"Meta":"Control",snapToGrid:j=!1,snapGrid:ce=Pd,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:te=!0,nodesDraggable:ee,nodesConnectable:le,nodesFocusable:fe,nodeOrigin:L=$d,edgesFocusable:se,edgesUpdatable:_e,elementsSelectable:qe,defaultViewport:Ke=Od,minZoom:Pe=.5,maxZoom:Le=2,translateExtent:we=Yo,preventScrolling:ve=!0,nodeExtent:Ne,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:Re=!0,zoomOnPinch:ge=!0,panOnScroll:Ce=!1,panOnScrollSpeed:st=.5,panOnScrollMode:at=ot.Free,zoomOnDoubleClick:wt=!0,panOnDrag:He=!0,onPaneClick:ct,onPaneMouseEnter:so,onPaneMouseMove:ao,onPaneMouseLeave:Bt,onPaneScroll:co,onPaneContextMenu:lr,children:lt,onEdgeUpdate:Oa,onEdgeContextMenu:Ra,onEdgeDoubleClick:Ha,onEdgeMouseEnter:Ba,onEdgeMouseMove:Va,onEdgeMouseLeave:La,onEdgeUpdateStart:Fa,onEdgeUpdateEnd:Xa,edgeUpdaterRadius:Ya=10,onNodesChange:Ua,onEdgesChange:Za,noDragClassName:Wa="nodrag",noWheelClassName:qa="nowheel",noPanClassName:ur="nopan",fitView:Ka=!1,fitViewOptions:Ga,connectOnClick:Qa=!0,attributionPosition:Ja,proOptions:ja,defaultEdgeOptions:ec,elevateNodesOnSelect:tc=!0,elevateEdgesOnSelect:nc=!1,disableKeyboardA11y:fr=!1,autoPanOnConnect:oc=!0,autoPanOnNodeDrag:rc=!0,connectionRadius:ic=20,isValidConnection:sc,onError:ac,style:cc,id:dr,nodeDragThreshold:lc,...uc},fc)=>{let lo=dr||"1";return p.default.createElement("div",{...uc,style:{...cc,...Rd},ref:fc,className:re(["react-flow",r]),"data-testid":"rf__wrapper",id:dr},p.default.createElement(Aa,null,p.default.createElement(kd,{onInit:u,onMove:l,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:I,nodeTypes:i,edgeTypes:s,connectionLineType:A,connectionLineStyle:T,connectionLineComponent:B,connectionLineContainerStyle:X,selectionKeyCode:Y,selectionOnDrag:U,selectionMode:q,deleteKeyCode:V,multiSelectionKeyCode:K,panActivationKeyCode:Q,zoomActivationKeyCode:G,onlyRenderVisibleElements:pe,selectNodesOnDrag:te,defaultViewport:Ke,translateExtent:we,minZoom:Pe,maxZoom:Le,preventScrolling:ve,zoomOnScroll:Re,zoomOnPinch:ge,zoomOnDoubleClick:wt,panOnScroll:Ce,panOnScrollSpeed:st,panOnScrollMode:at,panOnDrag:He,onPaneClick:ct,onPaneMouseEnter:so,onPaneMouseMove:ao,onPaneMouseLeave:Bt,onPaneScroll:co,onPaneContextMenu:lr,onSelectionContextMenu:E,onSelectionStart:k,onSelectionEnd:D,onEdgeUpdate:Oa,onEdgeContextMenu:Ra,onEdgeDoubleClick:Ha,onEdgeMouseEnter:Ba,onEdgeMouseMove:Va,onEdgeMouseLeave:La,onEdgeUpdateStart:Fa,onEdgeUpdateEnd:Xa,edgeUpdaterRadius:Ya,defaultMarkerColor:Oe,noDragClassName:Wa,noWheelClassName:qa,noPanClassName:ur,elevateEdgesOnSelect:nc,rfId:lo,disableKeyboardA11y:fr,nodeOrigin:L,nodeExtent:Ne}),p.default.createElement(If,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:x,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:ee,nodesConnectable:le,nodesFocusable:fe,edgesFocusable:se,edgesUpdatable:_e,elementsSelectable:qe,elevateNodesOnSelect:tc,minZoom:Pe,maxZoom:Le,nodeExtent:Ne,onNodesChange:Ua,onEdgesChange:Za,snapToGrid:j,snapGrid:ce,connectionMode:b,translateExtent:we,connectOnClick:Qa,defaultEdgeOptions:ec,fitView:Ka,fitViewOptions:Ga,onNodesDelete:R,onEdgesDelete:O,onNodeDragStart:$,onNodeDrag:z,onNodeDragStop:P,onSelectionDrag:m,onSelectionDragStart:_,onSelectionDragStop:N,noPanClassName:ur,nodeOrigin:L,rfId:lo,autoPanOnConnect:oc,autoPanOnNodeDrag:rc,onError:ac,connectionRadius:ic,isValidConnection:sc,nodeDragThreshold:lc}),p.default.createElement(Mf,{onSelectionChange:H}),lt,p.default.createElement(nf,{proOptions:ja,position:Ja}),p.default.createElement($f,{rfId:lo,disableKeyboardA11y:fr})))});ir.displayName="ReactFlow";var Hd=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function Bd({children:e}){let t=Z(Hd);return t?(0,Hs.createPortal)(e,t):null}function Vd(){let e=oe();return(0,p.useCallback)(t=>{let{domNode:n,updateNodeDimensions:o}=e.getState(),i=(Array.isArray(t)?t:[t]).reduce((s,a)=>{let c=n?.querySelector(`.react-flow__node[data-id="${a}"]`);return c&&s.push({id:a,nodeElement:c,forceUpdate:!0}),s},[]);requestAnimationFrame(()=>o(i))},[])}var Ld=e=>e.getNodes();function Fd(){return Z(Ld,ne)}var Xd=e=>e.edges;function Yd(){return Z(Xd,ne)}var Ud=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Zd(){return Z(Ud,ne)}function Ia(e){return t=>{let[n,o]=(0,p.useState)(t),r=(0,p.useCallback)(i=>o(s=>e(i,s)),[]);return[n,o,r]}}var Wd=Ia(or),qd=Ia(ga);function Kd({onStart:e,onChange:t,onEnd:n}){let o=oe();(0,p.useEffect)(()=>{o.setState({onViewportChangeStart:e})},[e]),(0,p.useEffect)(()=>{o.setState({onViewportChange:t})},[t]),(0,p.useEffect)(()=>{o.setState({onViewportChangeEnd:n})},[n])}function Gd({onChange:e}){let t=oe();(0,p.useEffect)(()=>{let n=[...t.getState().onSelectionChange,e];return t.setState({onSelectionChange:n}),()=>{let o=t.getState().onSelectionChange.filter(r=>r!==e);t.setState({onSelectionChange:o})}},[e])}var Qd=e=>t=>t.nodeInternals.size===0?!1:t.getNodes().filter(n=>e.includeHiddenNodes?!0:!n.hidden).every(n=>n[ie]?.handleBounds!==void 0),Jd={includeHiddenNodes:!1};function jd(e=Jd){return Z(Qd(e))}var he=Ge(ze("react"),1);var ka=({id:e,x:t,y:n,width:o,height:r,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:l,shapeRendering:f,onClick:d,selected:h})=>{let{background:x,backgroundColor:y}=i||{},v=s||x||y;return he.default.createElement("rect",{className:re(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:l,ry:l,width:o,height:r,fill:v,stroke:a,strokeWidth:c,shapeRendering:f,onClick:d?g=>d(g,e):void 0})};ka.displayName="MiniMapNode";var eh=(0,he.memo)(ka),th=e=>e.nodeOrigin,nh=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),sr=e=>e instanceof Function?e:()=>e;function oh({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r=2,nodeComponent:i=eh,onClick:s}){let a=Z(nh,ne),c=Z(th),u=sr(t),l=sr(e),f=sr(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return he.default.createElement(he.default.Fragment,null,a.map(h=>{let{x,y}=Ze(h,c).positionAbsolute;return he.default.createElement(i,{key:h.id,x,y,width:h.width,height:h.height,style:h.style,selected:h.selected,className:f(h),color:u(h),borderRadius:o,strokeColor:l(h),strokeWidth:r,shapeRendering:d,onClick:s,id:h.id})}))}var rh=(0,he.memo)(oh),ih=200,sh=150,ah=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?qo(We(t,e.nodeOrigin),n):n,rfId:e.rfId}},ch="react-flow__minimap-desc";function Ta({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:o="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:l=1,position:f="bottom-right",onClick:d,onNodeClick:h,pannable:x=!1,zoomable:y=!1,ariaLabel:v="React Flow mini map",inversePan:g=!1,zoomStep:S=10,offsetScale:C=5}){let w=oe(),M=(0,he.useRef)(null),{boundingRect:I,viewBB:$,rfId:z}=Z(ah,ne),P=e?.width??ih,R=e?.height??sh,O=I.width/P,H=I.height/R,_=Math.max(O,H),m=_*P,N=_*R,E=C*_,k=I.x-(m-I.width)/2-E,D=I.y-(N-I.height)/2-E,b=m+E*2,A=N+E*2,T=`${ch}-${z}`,B=(0,he.useRef)(0);B.current=_,(0,he.useEffect)(()=>{if(M.current){let Y=ue(M.current),U=K=>{let{transform:G,d3Selection:j,d3Zoom:ce}=w.getState();if(K.sourceEvent.type!=="wheel"||!j||!ce)return;let pe=-K.sourceEvent.deltaY*(K.sourceEvent.deltaMode===1?.05:K.sourceEvent.deltaMode?1:.002)*S,te=G[2]*Math.pow(2,pe);ce.scaleTo(j,te)},q=K=>{let{transform:G,d3Selection:j,d3Zoom:ce,translateExtent:pe,width:te,height:ee}=w.getState();if(K.sourceEvent.type!=="mousemove"||!j||!ce)return;let le=B.current*Math.max(1,G[2])*(g?-1:1),fe={x:G[0]-K.sourceEvent.movementX*le,y:G[1]-K.sourceEvent.movementY*le},L=[[0,0],[te,ee]],se=Ee.translate(fe.x,fe.y).scale(G[2]),_e=ce.constrain()(se,L,pe);ce.transform(j,_e)},Q=an().on("zoom",x?q:null).on("zoom.wheel",y?U:null);return Y.call(Q),()=>{Y.on("zoom",null)}}},[x,y,g,S]);let X=d?Y=>{let U=ye(Y);d(Y,{x:U[0],y:U[1]})}:void 0,V=h?(Y,U)=>{let q=w.getState().nodeInternals.get(U);h(Y,q)}:void 0;return he.default.createElement(Pt,{position:f,style:e,className:re(["react-flow__minimap",t]),"data-testid":"rf__minimap"},he.default.createElement("svg",{width:P,height:R,viewBox:`${k} ${D} ${b} ${A}`,role:"img","aria-labelledby":T,ref:M,onClick:X},v&&he.default.createElement("title",{id:T},v),he.default.createElement(rh,{onClick:V,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:a}),he.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${k-E},${D-E}h${b+E*2}v${A+E*2}h${-b-E*2}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:l,pointerEvents:"none"})))}Ta.displayName="MiniMap";var lh=(0,he.memo)(Ta);var J=Ge(ze("react"),1);function uh(){return J.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},J.default.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function fh(){return J.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},J.default.createElement("path",{d:"M0 0h32v4.2H0z"}))}function dh(){return J.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},J.default.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function hh(){return J.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},J.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ph(){return J.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},J.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var Ht=({children:e,className:t,...n})=>J.default.createElement("button",{type:"button",className:re(["react-flow__controls-button",t]),...n},e);Ht.displayName="ControlButton";var mh=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),za=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:l,position:f="bottom-left"})=>{let d=oe(),[h,x]=(0,J.useState)(!1),{isInteractive:y,minZoomReached:v,maxZoomReached:g}=Z(mh,ne),{zoomIn:S,zoomOut:C,fitView:w}=mn();if((0,J.useEffect)(()=>{x(!0)},[]),!h)return null;let M=()=>{S(),i?.()},I=()=>{C(),s?.()},$=()=>{w(r),a?.()},z=()=>{d.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c?.(!y)};return J.default.createElement(Pt,{className:re(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&J.default.createElement(J.default.Fragment,null,J.default.createElement(Ht,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},J.default.createElement(uh,null)),J.default.createElement(Ht,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},J.default.createElement(fh,null))),n&&J.default.createElement(Ht,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view"},J.default.createElement(dh,null)),o&&J.default.createElement(Ht,{className:"react-flow__controls-interactive",onClick:z,title:"toggle interactivity","aria-label":"toggle interactivity"},y?J.default.createElement(ph,null):J.default.createElement(hh,null)),l)};za.displayName="Controls";var gh=(0,J.memo)(za);var ke=Ge(ze("react"),1);var Te;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Te||(Te={}));function yh({color:e,dimensions:t,lineWidth:n}){return ke.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function xh({color:e,radius:t}){return ke.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}var wh={[Te.Dots]:"#91919a",[Te.Lines]:"#eee",[Te.Cross]:"#e2e2e2"},vh={[Te.Dots]:1,[Te.Lines]:1,[Te.Cross]:6},bh=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Da({id:e,variant:t=Te.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=2,color:s,style:a,className:c}){let u=(0,ke.useRef)(null),{transform:l,patternId:f}=Z(bh,ne),d=s||wh[t],h=o||vh[t],x=t===Te.Dots,y=t===Te.Cross,v=Array.isArray(n)?n:[n,n],g=[v[0]*l[2]||1,v[1]*l[2]||1],S=h*l[2],C=y?[S,S]:g,w=x?[S/i,S/i]:[C[0]/i,C[1]/i];return ke.default.createElement("svg",{className:re(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ke.default.createElement("pattern",{id:f+e,x:l[0]%g[0],y:l[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},x?ke.default.createElement(xh,{color:d,radius:S/i}):ke.default.createElement(yh,{dimensions:C,color:d,lineWidth:r})),ke.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Da.displayName="Background";var Eh=(0,ke.memo)(Da);var gn=Ge(ze("react"),1);var $a=ze("react-dom"),Sh=e=>e.domNode?.querySelector(".react-flow__renderer");function _h({children:e}){let t=Z(Sh);return t?(0,$a.createPortal)(e,t):null}var Nh=(e,t)=>e?.positionAbsolute?.x===t?.positionAbsolute?.x&&e?.positionAbsolute?.y===t?.positionAbsolute?.y&&e?.width===t?.width&&e?.height===t?.height&&e?.selected===t?.selected&&e?.[ie]?.z===t?.[ie]?.z,Ch=(e,t)=>e.length===t.length&&e.every((n,o)=>Nh(n,t[o])),Mh=e=>({transform:e.transform,nodeOrigin:e.nodeOrigin,selectedNodesCount:e.getNodes().filter(t=>t.selected).length});function Ah(e,t,n,o,r){let i=.5;r==="start"?i=0:r==="end"&&(i=1);let s=[(e.x+e.width*i)*t[2]+t[0],e.y*t[2]+t[1]-o],a=[-100*i,-100];switch(n){case F.Right:s=[(e.x+e.width)*t[2]+t[0]+o,(e.y+e.height*i)*t[2]+t[1]],a=[0,-100*i];break;case F.Bottom:s[1]=(e.y+e.height)*t[2]+t[1]+o,a[1]=0;break;case F.Left:s=[e.x*t[2]+t[0]-o,(e.y+e.height*i)*t[2]+t[1]],a=[-100,-100*i];break}return`translate(${s[0]}px, ${s[1]}px) translate(${a[0]}%, ${a[1]}%)`}function Ih({nodeId:e,children:t,className:n,style:o,isVisible:r,position:i=F.Top,offset:s=10,align:a="center",...c}){let u=Rt(),l=(0,gn.useCallback)(C=>(Array.isArray(e)?e:[e||u||""]).reduce((M,I)=>{let $=C.nodeInternals.get(I);return $&&M.push($),M},[]),[e,u]),f=Z(l,Ch),{transform:d,nodeOrigin:h,selectedNodesCount:x}=Z(Mh,ne);if(!(typeof r=="boolean"?r:f.length===1&&f[0].selected&&x===1)||!f.length)return null;let v=We(f,h),g=Math.max(...f.map(C=>(C[ie]?.z||1)+1)),S={position:"absolute",transform:Ah(v,d,i,s,a),zIndex:g,...o};return gn.default.createElement(_h,null,gn.default.createElement("div",{style:S,className:re(["react-flow__node-toolbar",n]),...c},t))}var Se=Ge(ze("react"),1);var xt;(function(e){e.Line="line",e.Handle="handle"})(xt||(xt={}));function kh({width:e,prevWidth:t,height:n,prevHeight:o,invertX:r,invertY:i}){let s=e-t,a=n-o,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}var Pa={width:0,height:0,x:0,y:0},Th={...Pa,pointerX:0,pointerY:0,aspectRatio:1};function zh({nodeId:e,position:t,variant:n=xt.Handle,className:o,style:r={},children:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:l=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:d,onResizeStart:h,onResize:x,onResizeEnd:y}){let v=Rt(),g=typeof e=="string"?e:v,S=oe(),C=(0,Se.useRef)(null),w=(0,Se.useRef)(Th),M=(0,Se.useRef)(Pa),I=io(),$=n===xt.Line?"right":"bottom-right",z=t??$;(0,Se.useEffect)(()=>{if(!C.current||!g)return;let H=ue(C.current),_=z.includes("right")||z.includes("left"),m=z.includes("bottom")||z.includes("top"),N=z.includes("left"),E=z.includes("top"),k=Wt().on("start",D=>{let b=S.getState().nodeInternals.get(g),{xSnapped:A,ySnapped:T}=I(D);M.current={width:b?.width??0,height:b?.height??0,x:b?.position.x??0,y:b?.position.y??0},w.current={...M.current,pointerX:A,pointerY:T,aspectRatio:M.current.width/M.current.height},h?.(D,{...M.current})}).on("drag",D=>{let{nodeInternals:b,triggerNodeChanges:A}=S.getState(),{xSnapped:T,ySnapped:B}=I(D),X=b.get(g);if(X){let V=[],{pointerX:Y,pointerY:U,width:q,height:Q,x:K,y:G,aspectRatio:j}=w.current,{x:ce,y:pe,width:te,height:ee}=M.current,le=Math.floor(_?T-Y:0),fe=Math.floor(m?B-U:0),L=Ve(q+(N?-le:le),a,u),se=Ve(Q+(E?-fe:fe),c,l);if(f){let we=L/se,ve=_&&m,Ne=_&&!m,Oe=m&&!_;L=we<=j&&ve||Oe?se*j:L,se=we>j&&ve||Ne?L/j:se,L>=u?(L=u,se=u/j):L<=a&&(L=a,se=a/j),se>=l?(se=l,L=l*j):se<=c&&(se=c,L=c*j)}let _e=L!==te,qe=se!==ee;if(N||E){let we=N?K-(L-q):K,ve=E?G-(se-Q):G,Ne=we!==ce&&_e,Oe=ve!==pe&&qe;if(Ne||Oe){let Re={id:X.id,type:"position",position:{x:Ne?we:ce,y:Oe?ve:pe}};V.push(Re),M.current.x=Re.position.x,M.current.y=Re.position.y}}if(_e||qe){let we={id:g,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:L,height:se}};V.push(we),M.current.width=L,M.current.height=se}if(V.length===0)return;let Ke=kh({width:M.current.width,prevWidth:te,height:M.current.height,prevHeight:ee,invertX:N,invertY:E}),Pe={...M.current,direction:Ke};if(d?.(D,Pe)===!1)return;x?.(D,Pe),A(V)}}).on("end",D=>{let b={id:g,type:"dimensions",resizing:!1};y?.(D,{...M.current}),S.getState().triggerNodeChanges([b])});return H.call(k),()=>{H.on(".drag",null)}},[g,z,a,c,u,l,f,I,h,x,y]);let P=z.split("-"),R=n===xt.Line?"borderColor":"backgroundColor",O=s?{...r,[R]:s}:r;return Se.default.createElement("div",{className:re(["react-flow__resize-control","nodrag",...P,n,o]),ref:C,style:O},i)}var ar=(0,Se.memo)(zh),Dh=["top-left","top-right","bottom-left","bottom-right"],$h=["top","right","bottom","left"];function Ph({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:l=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:d,onResizeStart:h,onResize:x,onResizeEnd:y}){return t?Se.default.createElement(Se.default.Fragment,null,$h.map(v=>Se.default.createElement(ar,{key:v,className:r,style:i,nodeId:e,position:v,variant:xt.Line,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:l,onResizeStart:h,keepAspectRatio:f,shouldResize:d,onResize:x,onResizeEnd:y})),Dh.map(v=>Se.default.createElement(ar,{key:v,className:n,style:o,nodeId:e,position:v,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:l,onResizeStart:h,keepAspectRatio:f,shouldResize:d,onResize:x,onResizeEnd:y}))):null}window.ReactFlow=cr;})();
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
