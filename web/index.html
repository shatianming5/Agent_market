<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agent Market Flow (MVP)</title>
    <link rel="stylesheet" href="https://unpkg.com/reactflow@11.10.2/dist/style.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <div class="sidebar">
        <h3>Flow Builder</h3>
        <div class="buttons" style="margin-bottom:6px">
          <button id="addData">+ Data</button>
          <button id="addExpr">+ Expression</button>
          <button id="addBt">+ Backtest</button>
          <button id="addHo">+ Hyperopt</button>
          <button id="addFb">+ Feedback</button>
          <button id="runFlow" style="margin-left:6px">▶ 运行Flow</button>
        </div>
        <div class="buttons" style="margin-bottom:6px">
          <button id="saveFlow">保存</button>
          <button id="loadFlow">加载</button>
        </div>

        <h4>选中节点配置</h4>
        <div id="nodeForm" class="panel"></div>

        <h3 style="margin-top:14px">快速参数</h3>
        <div>
          <label>Config</label>
          <input id="cfg" value="configs/config_freqai_multi.json" />
        </div>
        <div>
          <label>Feature File</label>
          <input id="featureFile" value="user_data/freqai_features_multi.json" />
        </div>
        <div>
          <label>Timeframe</label>
          <input id="timeframe" value="4h" />
        </div>
        <div>
          <label>LLM Model</label>
          <input id="llmModel" value="gpt-3.5-turbo" />
        </div>
        <div>
          <label>LLM Count</label>
          <input id="llmCount" type="number" value="3" />
        </div>
        <div>
          <label>API Key</label>
          <input id="apiKey" type="password" placeholder="LLM_API_KEY" />
        </div>
        <div>
          <label>Timerange</label>
          <input id="timerange" value="20210101-20210331" />
        </div>
        <div class="buttons">
          <button id="btnExpr">运行 表达式(LLM)</button>
          <button id="btnBacktest">运行 回测</button>
          <button id="btnSummary">查看 摘要</button>
        </div>
        <div class="summary" id="summary"></div>
        <div id="chart" style="height:240px;margin-top:8px;"></div>
        <h4>特征 TopN</h4>
        <div class="buttons" style="margin-bottom:6px">
          <button id="btnFeatTop">查看TopN</button>
        </div>
        <div id="featTop" class="panel"></div>
        <h4>回测对比</h4>
        <div class="buttons" style="gap:4px; display:flex; flex-direction:column; align-items:stretch;">
          <button id="btnList">加载结果列表</button>
          <input id="resA" placeholder="结果A文件名" />
          <input id="resB" placeholder="结果B文件名" />
          <button id="btnCompare">对比</button>
        </div>
      </div>
      <div class="canvas">
        <div id="root" style="width:100%;height:100%"></div>
      </div>
      <div class="logs">
        <h3>日志</h3>
        <pre id="logs"></pre>
      </div>
    </div>
    <script type="module" src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script type="module" src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script type="module" src="https://unpkg.com/reactflow@11.10.2/dist/standalone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script type="module" src="app.js"></script>
  </body>
  </html>
